import e from"./onig.wasm?module";async function t(e,t){throw new Error("no fs")}async function s(e){const t=await fetch(`https://lighter.codehike.org/${e}.json`);return await t.json()}const r=e=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e),o=(e,t)=>e.match(new RegExp(`.{${t}}`,"g")),n=e=>parseInt(e.repeat(2/e.length),16);function c(e,t){return void 0!==e?e/255:"number"!=typeof t||t<0||t>1?1:t}function a(e,t){if(!e)return e;const{r:s,g:a,b:i,a:u}=function(e){if(!e)return;if(!r(e))throw new Error("Invalid color string, must be a valid hex color");const t=Math.floor((e.length-1)/3),s=o(e.slice(1),t),[a,i,u,l]=s.map(n);return{r:a,g:i,b:u,a:c(l,1)}}(e);return function(e){if(!e)return;const{r:t,g:s,b:r,a:o}=e,n=Math.round(255*o);return`#${t.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`}({r:s,g:a,b:i,a:u*t})}function i(e,t){const s=e.colors||{};if(s[t])return s[t];const r=l[t];if(!r)throw new Error(`Unknown theme color key: ${t}`);return"string"==typeof r?i(e,r):function(e,t){const s=t[e.type];if(Array.isArray(s)){const[t,r,...o]=s;return t(i(e,r),...o)}return s}(e,r)}const u="#6FC3DF",l={"editor.foreground":{dark:"#bbbbbb",light:"#333333",hc:"#ffffff"},"editorLineNumber.foreground":{dark:"#858585",light:"#237893",hc:"#fffffe"},"editor.selectionBackground":{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},"editor.background":{light:"#fffffe",dark:"#1E1E1E",hc:"#000000"},"editorGroupHeader.tabsBackground":{dark:"#252526",light:"#F3F3F3"},"tab.activeBackground":"editor.background","tab.activeForeground":{dark:"#ffffff",light:"#333333",hc:"#ffffff"},"tab.border":{dark:"#252526",light:"#F3F3F3",hc:u},"tab.activeBorder":"tab.activeBackground","tab.inactiveBackground":{dark:"#2D2D2D",light:"#ECECEC"},"tab.inactiveForeground":{dark:[a,"tab.activeForeground",.5],light:[a,"tab.activeForeground",.5],hc:"#ffffff"},"diffEditor.insertedTextBackground":{dark:"#9ccc2c33",light:"#9ccc2c40"},"diffEditor.removedTextBackground":{dark:"#ff000033",light:"#ff000033"},"diffEditor.insertedLineBackground":{dark:"#9bb95533",light:"#9bb95533"},"diffEditor.removedLineBackground":{dark:"#ff000033",light:"#ff000033"},"icon.foreground":{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},"sideBar.background":{dark:"#252526",light:"#F3F3F3",hc:"#000000"},"sideBar.foreground":"editor.foreground","sideBar.border":"sideBar.background","list.inactiveSelectionBackground":{dark:"#37373D",light:"#E4E6F1"},"list.inactiveSelectionForeground":{},"list.hoverBackground":{dark:"#2A2D2E",light:"#F0F0F0"},"list.hoverForeground":{},"editorGroupHeader.tabsBorder":{hc:u},"tab.activeBorderTop":{hc:u},"tab.hoverBackground":"tab.inactiveBackground","tab.hoverForeground":"tab.inactiveForeground","editor.rangeHighlightBackground":{dark:"#ffffff0b",light:"#fdff0033"},"editor.infoForeground":{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},"input.border":{hc:u},"input.background":{dark:"#3C3C3C",light:"#fffffe",hc:"#000000"},"input.foreground":"editor.foreground","editor.lineHighlightBackground":{},focusBorder:{light:"#0090F1",dark:"#007FD4",hc:u},"editorGroup.border":{dark:"#444444",light:"#E7E7E7",hc:u},"list.activeSelectionBackground":{dark:"#094771",light:"#0060C0",hc:"#000000"},"list.activeSelectionForeground":{dark:"#fffffe",light:"#fffffe",hc:"#fffffe"},"lighter.inlineBackground":{dark:[a,"editor.background",.9],light:[a,"editor.background",.9]},"terminal.background":"editor.background","terminal.foreground":"editor.foreground","terminal.ansiBlack":{dark:"#000000",light:"#000000",hc:"#000000"},"terminal.ansiRed":{dark:"#cd3131",light:"#cd3131",hc:"#cd0000"},"terminal.ansiGreen":{dark:"#0DBC79",light:"#00BC00",hc:"#00cd00"},"terminal.ansiYellow":{dark:"#e5e510",light:"#949800",hc:"#cdcd00"},"terminal.ansiBlue":{dark:"#2472c8",light:"#0451a5",hc:"#0000ee"},"terminal.ansiMagenta":{dark:"#bc3fbc",light:"#bc05bc",hc:"#cd00cd"},"terminal.ansiCyan":{dark:"#11a8cd",light:"#0598bc",hc:"#00cdcd"},"terminal.ansiWhite":{dark:"#e5e5e5",light:"#555555",hc:"#e5e5e5"},"terminal.ansiBrightBlack":{dark:"#666666",light:"#666666",hc:"#7f7f7f"},"terminal.ansiBrightRed":{dark:"#f14c4c",light:"#cd3131",hc:"#ff0000"},"terminal.ansiBrightGreen":{dark:"#23d18b",light:"#14CE14",hc:"#00ff00"},"terminal.ansiBrightYellow":{dark:"#f5f543",light:"#b5ba00",hc:"#ffff00"},"terminal.ansiBrightBlue":{dark:"#3b8eea",light:"#0451a5",hc:"#5c5cff"},"terminal.ansiBrightMagenta":{dark:"#d670d6",light:"#bc05bc",hc:"#ff00ff"},"terminal.ansiBrightCyan":{dark:"#29b8db",light:"#0598bc",hc:"#00ffff"},"terminal.ansiBrightWhite":{dark:"#e5e5e5",light:"#a5a5a5",hc:"#ffffff"}},h=new Map,d=new Map;async function p(e){if("string"==typeof e){const r=e;if(!f.includes(r))throw new b(r);if(!h.has(r)){const e=async function(e){try{return await t()}catch(t){return await s(`themes/${e}`)}}(r).then((e=>(d.set(r,e),e)));h.set(r,e)}return h.get(r)}return e}function m(e){let t=null;if("string"==typeof e){if(t=d.get(e),!t)throw new Error("Syntax highlighting error: theme not loaded")}else t=e;return function(e){if(!e)return;const t=e.settings||e.tokenColors||[],s={name:e.name||"unknown-theme",type:g(e),foreground:"",background:"",settings:t,colors:e.colors||{},colorNames:e.colorNames},r=t.find((e=>!e.scope));if(r){const{foreground:e,background:t}=(null==r?void 0:r.settings)||{},o={};e&&!s.colors["editor.foreground"]&&(o["editor.foreground"]=e),t&&!s.colors["editor.background"]&&(o["editor.background"]=t),Object.keys(o).length>0&&(s.colors={...s.colors,...o}),s.foreground=e,s.background=t}r||(s.settings=[{settings:{foreground:i(s,"editor.foreground"),background:i(s,"editor.background")}},...s.settings]);if(s.background=s.background||i(s,"editor.background"),s.foreground=s.foreground||i(s,"editor.foreground"),"from-css"===e.type&&!s.colorNames){const e={};let t=0;s.settings=s.settings.map((s=>{const r={...s,settings:{...s.settings}},{foreground:o,background:n}=r.settings||{};return o&&!e[o]&&(e[o]=`#${t.toString(16).padStart(6,"0")}`,t++),n&&!e[n]&&(e[n]=`#${t.toString(16).padStart(6,"0")}`,t++),o&&(r.settings.foreground=e[o]),n&&(r.settings.background=e[n]),r})),s.colorNames=e}return s}(t)}function g(e){var t;if("from-css"===e.type)return"from-css";return"light"===(e.type?e.type:(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes("light"))?"light":"dark")?"light":"dark"}const f=["dark-plus","dracula-soft","dracula","github-dark","github-dark-dimmed","github-from-css","github-light","light-plus","material-darker","material-default","material-from-css","material-lighter","material-ocean","material-palenight","min-dark","min-light","monokai","nord","one-dark-pro","poimandres","slack-dark","slack-ochin","solarized-dark","solarized-light"];class b extends Error{constructor(e){super(`Unknown theme: ${e}`),this.theme=e}}function y(e){const t=t=>"colorScheme"===t?function(e){return"from-css"===e.type?"var(--ch-0)":e.type}(e):"foreground"===t?e.foreground:"background"===t?e.background:i(e,t);return{colorScheme:t("colorScheme"),foreground:t("foreground"),background:t("background"),lighter:{inlineBackground:t("lighter.inlineBackground")},editor:{background:t("editor.background"),foreground:t("editor.foreground"),lineHighlightBackground:t("editor.lineHighlightBackground"),rangeHighlightBackground:t("editor.rangeHighlightBackground"),infoForeground:t("editor.infoForeground"),selectionBackground:t("editor.selectionBackground")},focusBorder:t("focusBorder"),tab:{activeBackground:t("tab.activeBackground"),activeForeground:t("tab.activeForeground"),inactiveBackground:t("tab.inactiveBackground"),inactiveForeground:t("tab.inactiveForeground"),border:t("tab.border"),activeBorder:t("tab.activeBorder"),activeBorderTop:t("tab.activeBorderTop")},editorGroup:{border:t("editorGroup.border")},editorGroupHeader:{tabsBackground:t("editorGroupHeader.tabsBackground")},editorLineNumber:{foreground:t("editorLineNumber.foreground")},input:{background:t("input.background"),foreground:t("input.foreground"),border:t("input.border")},icon:{foreground:t("icon.foreground")},sideBar:{background:t("sideBar.background"),foreground:t("sideBar.foreground"),border:t("sideBar.border")},list:{activeSelectionBackground:t("list.activeSelectionBackground"),activeSelectionForeground:t("list.activeSelectionForeground"),hoverBackground:t("list.hoverBackground"),hoverForeground:t("list.hoverForeground")}}}const _=["abap","actionscript-3","ada","apache","apex","apl","applescript","ara","asm","astro","awk","ballerina","bash","bat","batch","be","beancount","berry","bibtex","bicep","blade","c","c#","cadence","cdc","clarity","clj","clojure","cmake","cmd","cobol","codeql","coffee","console","cpp","crystal","cs","csharp","css","cue","cypher","d","dart","dax","diff","docker","dockerfile","dream-maker","elixir","elm","erb","erl","erlang","f#","fish","fs","fsharp","fsl","gdresource","gdscript","gdshader","gherkin","git-commit","git-rebase","glimmer-js","glimmer-ts","glsl","gnuplot","go","graphql","groovy","hack","haml","handlebars","haskell","hbs","hcl","hjson","hlsl","hs","html","http","imba","ini","jade","java","javascript","jinja-html","jison","js","json","json5","jsonc","jsonl","jsonnet","jssm","jsx","julia","kotlin","kql","kusto","latex","less","liquid","lisp","logo","lua","make","makefile","markdown","marko","matlab","md","mdx","mermaid","narrat","nextflow","nginx","nim","nix","objc","objective-c","objective-cpp","ocaml","pascal","perl","perl6","php","plsql","postcss","powerquery","powershell","prisma","prolog","properties","proto","ps","ps1","pug","puppet","purescript","py","python","ql","r","raku","razor","rb","reg","rel","riscv","rs","rst","ruby","rust","sas","sass","scala","scheme","scss","sh","shader","shaderlab","shell","shellscript","shellsession","smalltalk","solidity","sparql","sql","ssh-config","stata","styl","stylus","svelte","swift","system-verilog","tasl","tcl","terminal","tex","text","toml","ts","tsx","turtle","twig","txt","typescript","v","vb","verilog","vhdl","vim","viml","vimscript","vue","vue-html","vyper","wasm","wenyan","wgsl","wolfram","xml","xsl","yaml","yml","zenscript","zsh","文言"],x={abap:"source.abap","actionscript-3":"source.actionscript.3",ada:"source.ada",apache:"source.apacheconf",apex:"source.apex",apl:"source.apl",applescript:"source.applescript",ara:"source.ara",asm:"source.asm.x86_64",astro:"source.astro",awk:"source.awk",ballerina:"source.ballerina",bat:"source.batchfile",batch:"source.batchfile",beancount:"text.beancount",berry:"source.berry",be:"source.berry",bibtex:"text.bibtex",bicep:"source.bicep",blade:"text.html.php.blade",c:"source.c",cadence:"source.cadence",cdc:"source.cadence",clarity:"source.clar",clojure:"source.clojure",clj:"source.clojure",cmake:"source.cmake",cobol:"source.cobol",codeql:"source.ql",ql:"source.ql",coffee:"source.coffee",cpp:"source.cpp",crystal:"source.crystal",csharp:"source.cs","c#":"source.cs",cs:"source.cs",css:"source.css",cue:"source.cue",cypher:"source.cypher",d:"source.d",dart:"source.dart",dax:"source.dax",diff:"source.diff",docker:"source.dockerfile",dockerfile:"source.dockerfile","dream-maker":"source.dm",elixir:"source.elixir",elm:"source.elm",erb:"text.html.erb",erlang:"source.erlang",erl:"source.erlang",fish:"source.fish",fsharp:"source.fsharp","f#":"source.fsharp",fs:"source.fsharp",gdresource:"source.gdresource",gdscript:"source.gdscript",gdshader:"source.gdshader",gherkin:"text.gherkin.feature","git-commit":"text.git-commit","git-rebase":"text.git-rebase","glimmer-js":"source.gjs","glimmer-ts":"source.gts",glsl:"source.glsl",gnuplot:"source.gnuplot",go:"source.go",graphql:"source.graphql",groovy:"source.groovy",hack:"source.hack",haml:"text.haml",handlebars:"text.html.handlebars",hbs:"text.html.handlebars",haskell:"source.haskell",hs:"source.haskell",hcl:"source.hcl",hjson:"source.hjson",hlsl:"source.hlsl",html:"text.html.basic",http:"source.http",imba:"source.imba",ini:"source.ini",properties:"source.ini",java:"source.java",javascript:"source.js",js:"source.js","jinja-html":"text.html.jinja",jison:"source.jison",json:"source.json",json5:"source.json5",jsonc:"source.json.comments",jsonl:"source.json.lines",jsonnet:"source.jsonnet",jssm:"source.jssm",fsl:"source.jssm",jsx:"source.js.jsx",julia:"source.julia",kotlin:"source.kotlin",kusto:"source.kusto",kql:"source.kusto",latex:"text.tex.latex",less:"source.css.less",liquid:"text.html.liquid",lisp:"source.lisp",logo:"source.logo",lua:"source.lua",make:"source.makefile",makefile:"source.makefile",markdown:"text.html.markdown",md:"text.html.markdown",marko:"text.marko",matlab:"source.matlab",mdx:"source.mdx",mermaid:"source.mermaid",narrat:"source.narrat",nextflow:"source.nextflow",nginx:"source.nginx",nim:"source.nim",nix:"source.nix","objective-c":"source.objc",objc:"source.objc","objective-cpp":"source.objcpp",ocaml:"source.ocaml",pascal:"source.pascal",perl:"source.perl",php:"source.php",plsql:"source.plsql.oracle",postcss:"source.css.postcss",powerquery:"source.powerquery",powershell:"source.powershell",ps:"source.powershell",ps1:"source.powershell",prisma:"source.prisma",prolog:"source.prolog",proto:"source.proto",pug:"text.pug",jade:"text.pug",puppet:"source.puppet",purescript:"source.purescript",python:"source.python",py:"source.python",r:"source.r",raku:"source.perl.6",perl6:"source.perl.6",razor:"text.aspnetcorerazor",reg:"source.reg",rel:"source.rel",riscv:"source.riscv",rst:"source.rst",ruby:"source.ruby",rb:"source.ruby",rust:"source.rust",rs:"source.rust",sas:"source.sas",sass:"source.sass",scala:"source.scala",scheme:"source.scheme",scss:"source.css.scss",shaderlab:"source.shaderlab",shader:"source.shaderlab",shellscript:"source.shell",bash:"source.shell",console:"source.shell",sh:"source.shell",shell:"source.shell",zsh:"source.shell",shellsession:"text.shell-session",smalltalk:"source.smalltalk",solidity:"source.solidity",sparql:"source.sparql",sql:"source.sql","ssh-config":"source.ssh-config",stata:"source.stata",stylus:"source.stylus",styl:"source.stylus",svelte:"source.svelte",swift:"source.swift","system-verilog":"source.systemverilog",tasl:"source.tasl",tcl:"source.tcl",tex:"text.tex",toml:"source.toml",tsx:"source.tsx",turtle:"source.turtle",twig:"text.html.twig",txt:"source.txt",typescript:"source.ts",ts:"source.ts",v:"source.v",vb:"source.asp.vb.net",cmd:"source.asp.vb.net",verilog:"source.verilog",vhdl:"source.vhdl",viml:"source.viml",vim:"source.viml",vimscript:"source.viml","vue-html":"text.html.vue-html",vue:"source.vue",vyper:"source.vyper",wasm:"source.wat",wenyan:"source.wenyan","文言":"source.wenyan",wgsl:"source.wgsl",wolfram:"source.wolfram",xml:"text.xml",xsl:"text.xml.xsl",yaml:"source.yaml",yml:"source.yaml",zenscript:"source.zenscript"},k={"source.abap":{id:"abap",path:"abap.tmLanguage.json",embeddedScopes:[]},"source.actionscript.3":{id:"actionscript-3",path:"actionscript-3.tmLanguage.json",embeddedScopes:[]},"source.ada":{id:"ada",path:"ada.tmLanguage.json",embeddedScopes:[]},"source.apacheconf":{id:"apache",path:"apache.tmLanguage.json",embeddedScopes:[]},"source.apex":{id:"apex",path:"apex.tmLanguage.json",embeddedScopes:[]},"source.apl":{id:"apl",path:"apl.tmLanguage.json",embeddedScopes:["source.java","source.json","source.js","source.css","text.xml","text.html.basic"]},"source.applescript":{id:"applescript",path:"applescript.tmLanguage.json",embeddedScopes:[]},"source.ara":{id:"ara",path:"ara.tmLanguage.json",embeddedScopes:[]},"source.asm.x86_64":{id:"asm",path:"asm.tmLanguage.json",embeddedScopes:[]},"source.astro":{id:"astro",path:"astro.tmLanguage.json",embeddedScopes:["source.tsx","source.css.postcss","source.css.less","source.css.scss","source.css","source.sass","source.stylus","source.ts","source.js","source.json"]},"source.awk":{id:"awk",path:"awk.tmLanguage.json",embeddedScopes:[]},"source.ballerina":{id:"ballerina",path:"ballerina.tmLanguage.json",embeddedScopes:[]},"source.batchfile":{id:"bat",path:"bat.tmLanguage.json",embeddedScopes:[]},"text.beancount":{id:"beancount",path:"beancount.tmLanguage.json",embeddedScopes:[]},"source.berry":{id:"berry",path:"berry.tmLanguage.json",embeddedScopes:[]},"text.bibtex":{id:"bibtex",path:"bibtex.tmLanguage.json",embeddedScopes:[]},"source.bicep":{id:"bicep",path:"bicep.tmLanguage.json",embeddedScopes:[]},"text.html.php.blade":{id:"blade",path:"blade.tmLanguage.json",embeddedScopes:["source.java","source.css","source.json","source.js","source.sql","text.xml","text.html.basic"]},"source.c":{id:"c",path:"c.tmLanguage.json",embeddedScopes:[]},"source.cadence":{id:"cadence",path:"cadence.tmLanguage.json",embeddedScopes:[]},"source.clar":{id:"clarity",path:"clarity.tmLanguage.json",embeddedScopes:[]},"source.clojure":{id:"clojure",path:"clojure.tmLanguage.json",embeddedScopes:[]},"source.cmake":{id:"cmake",path:"cmake.tmLanguage.json",embeddedScopes:[]},"source.cobol":{id:"cobol",path:"cobol.tmLanguage.json",embeddedScopes:["source.css","source.js","source.java","text.html.basic","source.sql"]},"source.ql":{id:"codeql",path:"codeql.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.stylus","source.sass","source.glsl","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.fsharp","source.cs","source.tsx","source.ts","source.shell","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.css.scss","source.swift","source.objc","source.css.less","source.json.comments","source.json","source.js","text.pug","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.c","source.coffee","source.clojure","source.batchfile","source.yaml","text.xml.xsl","text.xml","source.asp.vb.net","source.sql","source.php","source.ruby","source.r","source.perl","source.makefile","source.lua","source.java","source.ini","text.html.basic","source.css","text.html.markdown"]},"source.coffee":{id:"coffee",path:"coffee.tmLanguage.json",embeddedScopes:["source.js"]},"source.cpp":{id:"cpp",path:"cpp.tmLanguage.json",embeddedScopes:["source.c","source.sql","source.glsl"]},"source.crystal":{id:"crystal",path:"crystal.tmLanguage.json",embeddedScopes:["source.shell","source.js","source.c","source.css","source.sql","text.html.basic"]},"source.cs":{id:"csharp",path:"csharp.tmLanguage.json",embeddedScopes:[]},"source.css":{id:"css",path:"css.tmLanguage.json",embeddedScopes:[]},"source.cue":{id:"cue",path:"cue.tmLanguage.json",embeddedScopes:[]},"source.cypher":{id:"cypher",path:"cypher.tmLanguage.json",embeddedScopes:[]},"source.d":{id:"d",path:"d.tmLanguage.json",embeddedScopes:[]},"source.dart":{id:"dart",path:"dart.tmLanguage.json",embeddedScopes:[]},"source.dax":{id:"dax",path:"dax.tmLanguage.json",embeddedScopes:[]},"source.diff":{id:"diff",path:"diff.tmLanguage.json",embeddedScopes:[]},"source.dockerfile":{id:"docker",path:"docker.tmLanguage.json",embeddedScopes:[]},"source.dm":{id:"dream-maker",path:"dream-maker.tmLanguage.json",embeddedScopes:[]},"source.elixir":{id:"elixir",path:"elixir.tmLanguage.json",embeddedScopes:["source.css","source.js","text.html.basic"]},"source.elm":{id:"elm",path:"elm.tmLanguage.json",embeddedScopes:["source.c","source.glsl"]},"text.html.erb":{id:"erb",path:"erb.tmLanguage.json",embeddedScopes:["source.java","source.lua","source.shell","source.c","source.sql","text.xml","source.css","source.js","source.ruby","text.html.basic"]},"source.erlang":{id:"erlang",path:"erlang.tmLanguage.json",embeddedScopes:[]},"source.fish":{id:"fish",path:"fish.tmLanguage.json",embeddedScopes:[]},"source.fsharp":{id:"fsharp",path:"fsharp.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.stylus","source.sass","source.glsl","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.cs","source.tsx","source.ts","source.shell","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.css.scss","source.swift","source.objc","source.css.less","source.json.comments","source.json","source.js","text.pug","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.c","source.coffee","source.clojure","source.batchfile","source.yaml","text.xml.xsl","text.xml","source.asp.vb.net","source.sql","source.php","source.ruby","source.r","source.perl","source.makefile","source.lua","source.java","source.ini","text.html.basic","source.css","text.html.markdown"]},"source.gdresource":{id:"gdresource",path:"gdresource.tmLanguage.json",embeddedScopes:["source.gdscript","source.gdshader"]},"source.gdscript":{id:"gdscript",path:"gdscript.tmLanguage.json",embeddedScopes:[]},"source.gdshader":{id:"gdshader",path:"gdshader.tmLanguage.json",embeddedScopes:[]},"text.gherkin.feature":{id:"gherkin",path:"gherkin.tmLanguage.json",embeddedScopes:[]},"text.git-commit":{id:"git-commit",path:"git-commit.tmLanguage.json",embeddedScopes:["source.diff"]},"text.git-rebase":{id:"git-rebase",path:"git-rebase.tmLanguage.json",embeddedScopes:["source.shell"]},"source.gjs":{id:"glimmer-js",path:"glimmer-js.tmLanguage.json",embeddedScopes:["source.yaml","source.css","text.html.basic","text.html.handlebars","source.js"]},"source.gts":{id:"glimmer-ts",path:"glimmer-ts.tmLanguage.json",embeddedScopes:["source.yaml","source.js","source.css","text.html.basic","text.html.handlebars","source.ts"]},"source.glsl":{id:"glsl",path:"glsl.tmLanguage.json",embeddedScopes:["source.c"]},"source.gnuplot":{id:"gnuplot",path:"gnuplot.tmLanguage.json",embeddedScopes:[]},"source.go":{id:"go",path:"go.tmLanguage.json",embeddedScopes:[]},"source.graphql":{id:"graphql",path:"graphql.tmLanguage.json",embeddedScopes:["source.tsx","source.js.jsx","source.ts","source.js"]},"source.groovy":{id:"groovy",path:"groovy.tmLanguage.json",embeddedScopes:[]},"source.hack":{id:"hack",path:"hack.tmLanguage.json",embeddedScopes:["source.css","source.js","source.sql","text.html.basic"]},"text.haml":{id:"haml",path:"haml.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.stylus","source.glsl","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.fsharp","source.cs","source.tsx","source.ts","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.css.scss","source.swift","source.objc","source.css.less","source.json.comments","source.json","text.pug","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.clojure","source.batchfile","source.yaml","text.xml.xsl","source.asp.vb.net","source.php","source.r","source.perl","source.makefile","source.java","source.ini","source.lua","source.shell","source.c","source.sql","text.xml","text.html.basic","source.css","text.html.markdown","source.coffee","source.sass","source.js","source.ruby"]},"text.html.handlebars":{id:"handlebars",path:"handlebars.tmLanguage.json",embeddedScopes:["source.yaml","source.js","source.css","text.html.basic"]},"source.haskell":{id:"haskell",path:"haskell.tmLanguage.json",embeddedScopes:[]},"source.hcl":{id:"hcl",path:"hcl.tmLanguage.json",embeddedScopes:[]},"source.hjson":{id:"hjson",path:"hjson.tmLanguage.json",embeddedScopes:[]},"source.hlsl":{id:"hlsl",path:"hlsl.tmLanguage.json",embeddedScopes:[]},"text.html.basic":{id:"html",path:"html.tmLanguage.json",embeddedScopes:["source.css","source.js"]},"source.http":{id:"http",path:"http.tmLanguage.json",embeddedScopes:["source.tsx","source.js.jsx","source.ts","source.js","source.java","source.graphql","text.xml","source.json","source.shell"]},"source.imba":{id:"imba",path:"imba.tmLanguage.json",embeddedScopes:[]},"source.ini":{id:"ini",path:"ini.tmLanguage.json",embeddedScopes:[]},"source.java":{id:"java",path:"java.tmLanguage.json",embeddedScopes:[]},"source.js":{id:"javascript",path:"javascript.tmLanguage.json",embeddedScopes:[]},"text.html.jinja":{id:"jinja-html",path:"jinja-html.tmLanguage.json",embeddedScopes:["source.css","source.js","text.html.basic"]},"source.jison":{id:"jison",path:"jison.tmLanguage.json",embeddedScopes:["source.js"]},"source.json":{id:"json",path:"json.tmLanguage.json",embeddedScopes:[]},"source.json5":{id:"json5",path:"json5.tmLanguage.json",embeddedScopes:[]},"source.json.comments":{id:"jsonc",path:"jsonc.tmLanguage.json",embeddedScopes:[]},"source.json.lines":{id:"jsonl",path:"jsonl.tmLanguage.json",embeddedScopes:[]},"source.jsonnet":{id:"jsonnet",path:"jsonnet.tmLanguage.json",embeddedScopes:[]},"source.jssm":{id:"jssm",path:"jssm.tmLanguage.json",embeddedScopes:[]},"source.js.jsx":{id:"jsx",path:"jsx.tmLanguage.json",embeddedScopes:[]},"source.julia":{id:"julia",path:"julia.tmLanguage.json",embeddedScopes:["source.c","source.glsl","source.sql","source.r","source.js","source.python","source.cpp"]},"source.kotlin":{id:"kotlin",path:"kotlin.tmLanguage.json",embeddedScopes:[]},"source.kusto":{id:"kusto",path:"kusto.tmLanguage.json",embeddedScopes:[]},"text.tex.latex":{id:"latex",path:"latex.tmLanguage.json",embeddedScopes:["source.glsl","source.shell","source.sql","source.cpp","source.c","source.r","source.gnuplot","source.scala","source.rust","source.yaml","source.python","source.ts","source.js","source.ruby","source.julia","source.lua","source.java","text.xml","text.html.basic","source.haskell","source.css","text.tex"]},"source.css.less":{id:"less",path:"less.tmLanguage.json",embeddedScopes:["source.css"]},"text.html.liquid":{id:"liquid",path:"liquid.tmLanguage.json",embeddedScopes:["source.js","source.json","source.css","text.html.basic"]},"source.lisp":{id:"lisp",path:"lisp.tmLanguage.json",embeddedScopes:[]},"source.logo":{id:"logo",path:"logo.tmLanguage.json",embeddedScopes:[]},"source.lua":{id:"lua",path:"lua.tmLanguage.json",embeddedScopes:["source.c"]},"source.makefile":{id:"make",path:"make.tmLanguage.json",embeddedScopes:[]},"text.html.markdown":{id:"markdown",path:"markdown.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.stylus","source.sass","source.glsl","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.fsharp","source.cs","source.tsx","source.ts","source.shell","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.css.scss","source.swift","source.objc","source.css.less","source.json.comments","source.json","source.js","text.pug","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.c","source.coffee","source.clojure","source.batchfile","source.yaml","text.xml.xsl","text.xml","source.asp.vb.net","source.sql","source.php","source.ruby","source.r","source.perl","source.makefile","source.lua","source.java","source.ini","text.html.basic","source.css"]},"text.marko":{id:"marko",path:"marko.tmLanguage.json",embeddedScopes:["source.js","source.css.scss","source.css.less","source.css"]},"source.matlab":{id:"matlab",path:"matlab.tmLanguage.json",embeddedScopes:[]},"source.mdx":{id:"mdx",path:"mdx.tmLanguage.json",embeddedScopes:["source.gnuplot","text.tex","source.stylus","source.sass","text.bibtex","text.tex.latex","text.html.handlebars","source.dart","source.fsharp","source.powershell","source.perl.6","source.json.comments","text.pug","source.groovy","text.git-rebase","text.git-commit","source.batchfile","text.xml.xsl","source.asp.vb.net","source.php","source.js.jsx","source.glsl","source.ts","source.swift","text.xml","source.sql","text.shell-session","source.shell","source.css.scss","source.scala","source.rust","source.ruby","source.r","source.python","source.perl","source.objc","text.html.markdown","source.makefile","source.lua","source.css.less","source.kotlin","source.julia","source.json","source.js","source.java","source.ini","text.html.basic","source.haskell","source.graphql","source.go","source.erlang","source.elm","source.elixir","source.dockerfile","source.diff","source.css","source.cs","source.cpp","source.coffee","source.clojure","source.c","source.yaml","source.toml","source.tsx"]},"source.mermaid":{id:"mermaid",path:"mermaid.tmLanguage.json",embeddedScopes:[]},"source.narrat":{id:"narrat",path:"narrat.tmLanguage.json",embeddedScopes:[]},"source.nextflow":{id:"nextflow",path:"nextflow.tmLanguage.json",embeddedScopes:[]},"source.nginx":{id:"nginx",path:"nginx.tmLanguage.json",embeddedScopes:["source.c","source.lua"]},"source.nim":{id:"nim",path:"nim.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.stylus","source.sass","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.fsharp","source.cs","source.tsx","source.ts","source.shell","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.css.scss","source.swift","source.objc","source.css.less","source.json.comments","source.json","text.pug","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.coffee","source.clojure","source.batchfile","source.yaml","text.xml.xsl","source.asp.vb.net","source.sql","source.php","source.ruby","source.r","source.perl","source.makefile","source.lua","source.ini","source.java","text.html.markdown","source.glsl","source.css","source.js","text.xml","text.html.basic","source.c"]},"source.nix":{id:"nix",path:"nix.tmLanguage.json",embeddedScopes:[]},"source.objc":{id:"objective-c",path:"objective-c.tmLanguage.json",embeddedScopes:[]},"source.objcpp":{id:"objective-cpp",path:"objective-cpp.tmLanguage.json",embeddedScopes:[]},"source.ocaml":{id:"ocaml",path:"ocaml.tmLanguage.json",embeddedScopes:[]},"source.pascal":{id:"pascal",path:"pascal.tmLanguage.json",embeddedScopes:[]},"source.perl":{id:"perl",path:"perl.tmLanguage.json",embeddedScopes:["source.java","source.sql","source.js","source.css","text.xml","text.html.basic"]},"source.php":{id:"php",path:"php.tmLanguage.json",embeddedScopes:["source.java","source.css","source.json","source.js","source.sql","text.xml","text.html.basic"]},"source.plsql.oracle":{id:"plsql",path:"plsql.tmLanguage.json",embeddedScopes:[]},"source.css.postcss":{id:"postcss",path:"postcss.tmLanguage.json",embeddedScopes:[]},"source.powerquery":{id:"powerquery",path:"powerquery.tmLanguage.json",embeddedScopes:[]},"source.powershell":{id:"powershell",path:"powershell.tmLanguage.json",embeddedScopes:[]},"source.prisma":{id:"prisma",path:"prisma.tmLanguage.json",embeddedScopes:[]},"source.prolog":{id:"prolog",path:"prolog.tmLanguage.json",embeddedScopes:[]},"source.proto":{id:"proto",path:"proto.tmLanguage.json",embeddedScopes:[]},"text.pug":{id:"pug",path:"pug.tmLanguage.json",embeddedScopes:["text.html.basic","source.coffee","source.stylus","source.css.scss","source.sass","source.css","source.js"]},"source.puppet":{id:"puppet",path:"puppet.tmLanguage.json",embeddedScopes:[]},"source.purescript":{id:"purescript",path:"purescript.tmLanguage.json",embeddedScopes:[]},"source.python":{id:"python",path:"python.tmLanguage.json",embeddedScopes:[]},"source.r":{id:"r",path:"r.tmLanguage.json",embeddedScopes:[]},"source.perl.6":{id:"raku",path:"raku.tmLanguage.json",embeddedScopes:[]},"text.aspnetcorerazor":{id:"razor",path:"razor.tmLanguage.json",embeddedScopes:["source.css","source.js","source.cs","text.html.basic"]},"source.reg":{id:"reg",path:"reg.tmLanguage.json",embeddedScopes:[]},"source.rel":{id:"rel",path:"rel.tmLanguage.json",embeddedScopes:[]},"source.riscv":{id:"riscv",path:"riscv.tmLanguage.json",embeddedScopes:[]},"source.rst":{id:"rst",path:"rst.tmLanguage.json",embeddedScopes:["source.java","source.lua","source.c","source.css","text.xml","text.html.basic","source.sql","source.glsl","source.ruby","source.cmake","source.yaml","source.shell","source.js","source.python","source.cpp"]},"source.ruby":{id:"ruby",path:"ruby.tmLanguage.json",embeddedScopes:["source.java","source.lua","source.shell","source.js","source.c","source.css","source.sql","text.xml","text.html.basic"]},"source.rust":{id:"rust",path:"rust.tmLanguage.json",embeddedScopes:[]},"source.sas":{id:"sas",path:"sas.tmLanguage.json",embeddedScopes:["source.sql"]},"source.sass":{id:"sass",path:"sass.tmLanguage.json",embeddedScopes:[]},"source.scala":{id:"scala",path:"scala.tmLanguage.json",embeddedScopes:[]},"source.scheme":{id:"scheme",path:"scheme.tmLanguage.json",embeddedScopes:[]},"source.css.scss":{id:"scss",path:"scss.tmLanguage.json",embeddedScopes:["source.css"]},"source.shaderlab":{id:"shaderlab",path:"shaderlab.tmLanguage.json",embeddedScopes:["source.hlsl"]},"source.shell":{id:"shellscript",path:"shellscript.tmLanguage.json",embeddedScopes:[]},"text.shell-session":{id:"shellsession",path:"shellsession.tmLanguage.json",embeddedScopes:["source.shell"]},"source.smalltalk":{id:"smalltalk",path:"smalltalk.tmLanguage.json",embeddedScopes:[]},"source.solidity":{id:"solidity",path:"solidity.tmLanguage.json",embeddedScopes:[]},"source.sparql":{id:"sparql",path:"sparql.tmLanguage.json",embeddedScopes:["source.turtle"]},"source.sql":{id:"sql",path:"sql.tmLanguage.json",embeddedScopes:[]},"source.ssh-config":{id:"ssh-config",path:"ssh-config.tmLanguage.json",embeddedScopes:[]},"source.stata":{id:"stata",path:"stata.tmLanguage.json",embeddedScopes:["source.sql"]},"source.stylus":{id:"stylus",path:"stylus.tmLanguage.json",embeddedScopes:[]},"source.svelte":{id:"svelte",path:"svelte.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.glsl","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.fsharp","source.cs","source.tsx","source.shell","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.swift","source.objc","source.json.comments","source.json","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.c","source.clojure","source.batchfile","source.yaml","text.xml.xsl","text.xml","source.asp.vb.net","source.sql","source.php","source.ruby","source.r","source.perl","source.makefile","source.lua","source.java","source.ini","text.html.basic","text.html.markdown","text.pug","source.css.postcss","source.css.less","source.css.scss","source.css","source.sass","source.stylus","source.coffee","source.ts","source.js"]},"source.swift":{id:"swift",path:"swift.tmLanguage.json",embeddedScopes:[]},"source.systemverilog":{id:"system-verilog",path:"system-verilog.tmLanguage.json",embeddedScopes:[]},"source.tasl":{id:"tasl",path:"tasl.tmLanguage.json",embeddedScopes:[]},"source.tcl":{id:"tcl",path:"tcl.tmLanguage.json",embeddedScopes:[]},"text.tex":{id:"tex",path:"tex.tmLanguage.json",embeddedScopes:["source.r"]},"source.toml":{id:"toml",path:"toml.tmLanguage.json",embeddedScopes:[]},"source.tsx":{id:"tsx",path:"tsx.tmLanguage.json",embeddedScopes:[]},"source.turtle":{id:"turtle",path:"turtle.tmLanguage.json",embeddedScopes:[]},"text.html.twig":{id:"twig",path:"twig.tmLanguage.json",embeddedScopes:["source.java","source.lua","source.shell","source.c","source.json","source.sql","text.xml","text.html.basic","source.ruby","source.python","source.php","source.js","source.css"]},"source.txt":{id:"txt",path:"txt.tmLanguage.json",embeddedScopes:[]},"source.ts":{id:"typescript",path:"typescript.tmLanguage.json",embeddedScopes:[]},"source.v":{id:"v",path:"v.tmLanguage.json",embeddedScopes:[]},"source.asp.vb.net":{id:"vb",path:"vb.tmLanguage.json",embeddedScopes:[]},"source.verilog":{id:"verilog",path:"verilog.tmLanguage.json",embeddedScopes:[]},"source.vhdl":{id:"vhdl",path:"vhdl.tmLanguage.json",embeddedScopes:[]},"source.viml":{id:"viml",path:"viml.tmLanguage.json",embeddedScopes:[]},"text.html.vue-html":{id:"vue-html",path:"vue-html.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.glsl","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.fsharp","source.cs","source.shell","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.swift","source.objc","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.c","source.coffee","source.clojure","source.batchfile","text.xml.xsl","text.xml","source.asp.vb.net","source.sql","source.php","source.ruby","source.r","source.perl","source.makefile","source.lua","source.java","source.ini","source.graphql","source.toml","source.yaml","source.json5","source.json.comments","source.json","source.tsx","source.js.jsx","source.ts","source.css.less","source.css.scss","source.css","source.sass","source.stylus","text.pug","text.html.markdown","text.html.basic","source.js","source.vue"]},"source.vue":{id:"vue",path:"vue.tmLanguage.json",embeddedScopes:["source.gnuplot","source.haskell","text.tex","source.glsl","text.bibtex","text.tex.latex","source.elixir","source.erlang","text.html.handlebars","source.dart","source.fsharp","source.cs","source.shell","source.scala","source.rust","source.julia","source.python","source.powershell","source.perl.6","source.swift","source.objc","source.groovy","source.go","text.git-rebase","text.git-commit","source.dockerfile","source.diff","source.cpp","source.c","source.coffee","source.clojure","source.batchfile","text.xml.xsl","text.xml","source.asp.vb.net","source.sql","source.php","source.ruby","source.r","source.perl","source.makefile","source.lua","source.java","source.ini","source.graphql","source.toml","source.yaml","source.json5","source.json.comments","source.json","source.tsx","source.js.jsx","source.ts","source.js","source.css.less","source.css.scss","source.css","source.sass","source.stylus","text.pug","text.html.markdown","text.html.basic"]},"source.vyper":{id:"vyper",path:"vyper.tmLanguage.json",embeddedScopes:[]},"source.wat":{id:"wasm",path:"wasm.tmLanguage.json",embeddedScopes:[]},"source.wenyan":{id:"wenyan",path:"wenyan.tmLanguage.json",embeddedScopes:[]},"source.wgsl":{id:"wgsl",path:"wgsl.tmLanguage.json",embeddedScopes:[]},"source.wolfram":{id:"wolfram",path:"wolfram.tmLanguage.json",embeddedScopes:[]},"text.xml":{id:"xml",path:"xml.tmLanguage.json",embeddedScopes:["source.java"]},"text.xml.xsl":{id:"xsl",path:"xsl.tmLanguage.json",embeddedScopes:["source.java","text.xml"]},"source.yaml":{id:"yaml",path:"yaml.tmLanguage.json",embeddedScopes:[]},"source.zenscript":{id:"zenscript",path:"zenscript.tmLanguage.json",embeddedScopes:[]}};var j={d:(e,t)=>{for(var s in t)j.o(t,s)&&!j.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},S={};j.d(S,{_X:()=>Qe,Bz:()=>He,ot:()=>ze,u:()=>De,jG:()=>A,Pn:()=>Ke});const w="undefined"!=typeof process&&!!process.env.VSCODE_TEXTMATE_DEBUG;var v;function L(e,t){const s=[],r=function(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,s=t.exec(e);return{next:()=>{if(!s)return null;const r=s[0];return s=t.exec(e),r}}}(e);let o=r.next();for(;null!==o;){let e=0;if(2===o.length&&":"===o.charAt(1)){switch(o.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=r.next()}let t=c();if(s.push({matcher:t,priority:e}),","!==o)break;o=r.next()}return s;function n(){if("-"===o){o=r.next();const e=n();return t=>!!e&&!e(t)}if("("===o){o=r.next();const e=function(){const e=[];let t=c();for(;t&&(e.push(t),"|"===o||","===o);){do{o=r.next()}while("|"===o||","===o);t=c()}return t=>e.some((e=>e(t)))}();return")"===o&&(o=r.next()),e}if(C(o)){const e=[];do{e.push(o),o=r.next()}while(C(o));return s=>t(e,s)}return null}function c(){const e=[];let t=n();for(;t;)e.push(t),t=n();return t=>e.every((e=>e(t)))}}function C(e){return!!e&&!!e.match(/[\w\.:]+/)}function A(e){"function"==typeof e.dispose&&e.dispose()}function N(e){return Array.isArray(e)?function(e){let t=[];for(let s=0,r=e.length;s<r;s++)t[s]=N(e[s]);return t}(e):"object"==typeof e?function(e){let t={};for(let s in e)t[s]=N(e[s]);return t}(e):e}function P(e,...t){return t.forEach((t=>{for(let s in t)e[s]=t[s]})),e}function R(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t==e.length-1?R(e.substring(0,e.length-1)):e.substr(1+~t)}!function(e){e.toBinaryStr=function(e){let t=e.toString(2);for(;t.length<32;)t="0"+t;return t},e.print=function(t){const s=e.getLanguageId(t),r=e.getTokenType(t),o=e.getFontStyle(t),n=e.getForeground(t),c=e.getBackground(t);console.log({languageId:s,tokenType:r,fontStyle:o,foreground:n,background:c})},e.getLanguageId=function(e){return(255&e)>>>0},e.getTokenType=function(e){return(768&e)>>>8},e.containsBalancedBrackets=function(e){return 0!=(1024&e)},e.getFontStyle=function(e){return(30720&e)>>>11},e.getForeground=function(e){return(16744448&e)>>>15},e.getBackground=function(e){return(4278190080&e)>>>24},e.set=function(t,s,r,o,n,c,a){let i=e.getLanguageId(t),u=e.getTokenType(t),l=e.containsBalancedBrackets(t)?1:0,h=e.getFontStyle(t),d=e.getForeground(t),p=e.getBackground(t);return 0!==s&&(i=s),8!==r&&(u=r),null!==o&&(l=o?1:0),-1!==n&&(h=n),0!==c&&(d=c),0!==a&&(p=a),(i<<0|u<<8|l<<10|h<<11|d<<15|p<<24)>>>0}}(v||(v={}));let I=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;class E{static hasCaptures(e){return null!==e&&(I.lastIndex=0,I.test(e))}static replaceCaptures(e,t,s){return e.replace(I,((e,r,o,n)=>{let c=s[parseInt(r||o,10)];if(!c)return e;{let e=t.substring(c.start,c.end);for(;"."===e[0];)e=e.substring(1);switch(n){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}}))}}function B(e,t){return e<t?-1:e>t?1:0}function G(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;let s=e.length,r=t.length;if(s===r){for(let r=0;r<s;r++){let s=B(e[r],t[r]);if(0!==s)return s}return 0}return s-r}function T(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function F(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}class q{constructor(e){this.fn=e,this.cache=new Map}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}}const O="undefined"==typeof performance?function(){return Date.now()}:function(){return performance.now()};class ${constructor(e){this.scopeName=e}toKey(){return this.scopeName}}class M{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}}class U{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}class W{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new $(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new U;for(const s of e)D(s,this.initialScopeName,this.repo,t);for(const e of t.references)if(e instanceof $){if(this.seenFullScopeRequests.has(e.scopeName))continue;this.seenFullScopeRequests.add(e.scopeName),this.Q.push(e)}else{if(this.seenFullScopeRequests.has(e.scopeName))continue;if(this.seenPartialScopeRequests.has(e.toKey()))continue;this.seenPartialScopeRequests.add(e.toKey()),this.Q.push(e)}}}function D(e,t,s,r){const o=s.lookup(e.scopeName);if(!o){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const n=s.lookup(t);e instanceof $?H({baseGrammar:n,selfGrammar:o},r):z(e.ruleName,{baseGrammar:n,selfGrammar:o,repository:o.repository},r);const c=s.injections(e.scopeName);if(c)for(const e of c)r.add(new $(e))}function z(e,t,s){t.repository&&t.repository[e]&&Q([t.repository[e]],t,s)}function H(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&Q(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&Q(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function Q(e,t,s){for(const r of e){if(s.visitedRule.has(r))continue;s.visitedRule.add(r);const e=r.repository?P({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&Q(r.patterns,{...t,repository:e},s);const o=r.include;if(!o)continue;const n=Z(o);switch(n.kind){case 0:H({...t,selfGrammar:t.baseGrammar},s);break;case 1:H(t,s);break;case 2:z(n.ruleName,{...t,repository:e},s);break;case 3:case 4:const r=n.scopeName===t.selfGrammar.scopeName?t.selfGrammar:n.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(r){const o={baseGrammar:t.baseGrammar,selfGrammar:r,repository:e};4===n.kind?z(n.ruleName,o,s):H(o,s)}else 4===n.kind?s.add(new M(n.scopeName,n.ruleName)):s.add(new $(n.scopeName))}}}class K{constructor(){this.kind=0}}class V{constructor(){this.kind=1}}class Y{constructor(e){this.ruleName=e,this.kind=2}}class X{constructor(e){this.scopeName=e,this.kind=3}}class J{constructor(e,t){this.scopeName=e,this.ruleName=t,this.kind=4}}function Z(e){if("$base"===e)return new K;if("$self"===e)return new V;const t=e.indexOf("#");if(-1===t)return new X(e);if(0===t)return new Y(e.substring(1));{const s=e.substring(0,t),r=e.substring(t+1);return new J(s,r)}}const ee=/\\(\d+)/,te=/\\(\d+)/g;class se{constructor(e,t,s,r){this.$location=e,this.id=t,this._name=s||null,this._nameIsCapturing=E.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=E.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${R(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?E.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?E.replaceCaptures(this._contentName,e,t):this._contentName}}class re extends se{constructor(e,t,s,r,o){super(e,t,s,r),this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,s,r){throw new Error("Not supported!")}}class oe extends se{constructor(e,t,s,r,o){super(e,t,s,null),this._match=new ue(r,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e).compileAG(e,s,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new le,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class ne extends se{constructor(e,t,s,r,o){super(e,t,s,r),this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const s of this.patterns)e.getRule(s).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e).compileAG(e,s,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new le,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class ce extends se{constructor(e,t,s,r,o,n,c,a,i,u){super(e,t,s,r),this._begin=new ue(o,this.id),this.beginCaptures=n,this._end=new ue(c||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=i||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,s,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new le;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}}class ae extends se{constructor(e,t,s,r,o,n,c,a,i){super(e,t,s,r),this._begin=new ue(o,this.id),this.beginCaptures=n,this.whileCaptures=a,this._while=new ue(c,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e).compileAG(e,s,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new le;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,s,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,s,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new le,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}}class ie{static createCaptureRule(e,t,s,r,o){return e.registerRule((e=>new re(t,e,s,r,o)))}static getCompiledRuleId(e,t,s){return e.id||t.registerRule((r=>{if(e.id=r,e.match)return new oe(e.$vscodeTextmateLocation,e.id,e.name,e.match,ie._compileCaptures(e.captures,t,s));if(void 0===e.begin){e.repository&&(s=P({},s,e.repository));let r=e.patterns;return void 0===r&&e.include&&(r=[{include:e.include}]),new ne(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,ie._compilePatterns(r,t,s))}return e.while?new ae(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ie._compileCaptures(e.beginCaptures||e.captures,t,s),e.while,ie._compileCaptures(e.whileCaptures||e.captures,t,s),ie._compilePatterns(e.patterns,t,s)):new ce(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ie._compileCaptures(e.beginCaptures||e.captures,t,s),e.end,ie._compileCaptures(e.endCaptures||e.captures,t,s),e.applyEndPatternLast,ie._compilePatterns(e.patterns,t,s))})),e.id}static _compileCaptures(e,t,s){let r=[];if(e){let o=0;for(const t in e){if("$vscodeTextmateLocation"===t)continue;const e=parseInt(t,10);e>o&&(o=e)}for(let e=0;e<=o;e++)r[e]=null;for(const o in e){if("$vscodeTextmateLocation"===o)continue;const n=parseInt(o,10);let c=0;e[o].patterns&&(c=ie.getCompiledRuleId(e[o],t,s)),r[n]=ie.createCaptureRule(t,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,c)}}return r}static _compilePatterns(e,t,s){let r=[];if(e)for(let o=0,n=e.length;o<n;o++){const n=e[o];let c=-1;if(n.include){const e=Z(n.include);switch(e.kind){case 0:case 1:c=ie.getCompiledRuleId(s[n.include],t,s);break;case 2:let r=s[e.ruleName];r&&(c=ie.getCompiledRuleId(r,t,s));break;case 3:case 4:const o=e.scopeName,a=4===e.kind?e.ruleName:null,i=t.getExternalGrammar(o,s);if(i)if(a){let e=i.repository[a];e&&(c=ie.getCompiledRuleId(e,t,i.repository))}else c=ie.getCompiledRuleId(i.repository.$self,t,i.repository)}}else c=ie.getCompiledRuleId(n,t,s);if(-1!==c){const e=t.getRule(c);let s=!1;if((e instanceof ne||e instanceof ce||e instanceof ae)&&e.hasMissingPatterns&&0===e.patterns.length&&(s=!0),s)continue;r.push(c)}}return{patterns:r,hasMissingPatterns:(e?e.length:0)!==r.length}}}class ue{constructor(e,t){if(e){const t=e.length;let s=0,r=[],o=!1;for(let n=0;n<t;n++)if("\\"===e.charAt(n)&&n+1<t){const t=e.charAt(n+1);"z"===t?(r.push(e.substring(s,n)),r.push("$(?!\\n)(?<!\\n)"),s=n+2):"A"!==t&&"G"!==t||(o=!0),n++}this.hasAnchor=o,0===s?this.source=e:(r.push(e.substring(s,t)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,this.hasBackReferences=ee.test(this.source)}clone(){return new ue(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){let s=t.map((t=>e.substring(t.start,t.end)));return te.lastIndex=0,this.source.replace(te,((e,t)=>F(s[parseInt(t,10)]||"")))}_buildAnchorCache(){let e,t,s,r,o=[],n=[],c=[],a=[];for(e=0,t=this.source.length;e<t;e++)s=this.source.charAt(e),o[e]=s,n[e]=s,c[e]=s,a[e]=s,"\\"===s&&e+1<t&&(r=this.source.charAt(e+1),"A"===r?(o[e+1]="￿",n[e+1]="￿",c[e+1]="A",a[e+1]="A"):"G"===r?(o[e+1]="￿",n[e+1]="G",c[e+1]="￿",a[e+1]="G"):(o[e+1]=r,n[e+1]=r,c[e+1]=r,a[e+1]=r),e++);return{A0_G0:o.join(""),A0_G1:n.join(""),A1_G0:c.join(""),A1_G1:a.join("")}}resolveAnchors(e,t){return this.hasAnchor&&this._anchorCache?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}class le{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map((e=>e.source));this._cached=new he(e,t,this._items.map((e=>e.ruleId)))}return this._cached}compileAG(e,t,s){return this._hasAnchors?t?s?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,s)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,s)),this._anchorCache.A1_G0):s?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,s)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,s)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,s){let r=this._items.map((e=>e.resolveAnchors(t,s)));return new he(e,r,this._items.map((e=>e.ruleId)))}}class he{constructor(e,t,s){this.regExps=t,this.rules=s,this.scanner=e.createOnigScanner(t)}dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){const e=[];for(let t=0,s=this.rules.length;t<s;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,s){const r=this.scanner.findNextMatchSync(e,t,s);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}class de{constructor(e,t,s){this._colorMap=e,this._defaults=t,this._root=s,this._cachedMatchRoot=new q((e=>this._root.match(e)))}static createFromRawTheme(e,t){return this.createFromParsedTheme(function(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,s=[],r=0;for(let e=0,o=t.length;e<o;e++){let o,n=t[e];if(!n.settings)continue;if("string"==typeof n.scope){let e=n.scope;e=e.replace(/^[,]+/,""),e=e.replace(/[,]+$/,""),o=e.split(",")}else o=Array.isArray(n.scope)?n.scope:[""];let c=-1;if("string"==typeof n.settings.fontStyle){c=0;let e=n.settings.fontStyle.split(" ");for(let t=0,s=e.length;t<s;t++)switch(e[t]){case"italic":c|=1;break;case"bold":c|=2;break;case"underline":c|=4;break;case"strikethrough":c|=8}}let a=null;"string"==typeof n.settings.foreground&&T(n.settings.foreground)&&(a=n.settings.foreground);let i=null;"string"==typeof n.settings.background&&T(n.settings.background)&&(i=n.settings.background);for(let t=0,n=o.length;t<n;t++){let n=o[t].trim().split(" "),u=n[n.length-1],l=null;n.length>1&&(l=n.slice(0,n.length-1),l.reverse()),s[r++]=new fe(u,l,e,c,a,i)}}return s}(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort(((e,t)=>{let s=B(e.scope,t.scope);return 0!==s?s:(s=G(e.parentScopes,t.parentScopes),0!==s?s:e.index-t.index)}));let s=0,r="#000000",o="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(s=t.fontStyle),null!==t.foreground&&(r=t.foreground),null!==t.background&&(o=t.background)}let n=new be(t),c=new ge(s,n.getId(r),n.getId(o)),a=new _e(new ye(0,null,-1,0,0),[]);for(let t=0,s=e.length;t<s;t++){let s=e[t];a.insert(0,s.scope,s.parentScopes,s.fontStyle,n.getId(s.foreground),n.getId(s.background))}return new de(n,c,a)}(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;const t=e.scopeName,s=this._cachedMatchRoot.get(t).find((t=>function(e,t){if(null===t)return!0;let s=0,r=t[s];for(;e;){if(me(e.scopeName,r)){if(s++,s===t.length)return!0;r=t[s]}e=e.parent}return!1}(e.parent,t.parentScopes)));return s?new ge(s.fontStyle,s.foreground,s.background):null}}class pe{constructor(e,t){this.parent=e,this.scopeName=t}static push(e,t){for(const s of t)e=new pe(e,s);return e}static from(...e){let t=null;for(let s=0;s<e.length;s++)t=new pe(t,e[s]);return t}push(e){return new pe(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push(s.scopeName),s=s.parent;return s===e?t.reverse():void 0}}function me(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}class ge{constructor(e,t,s){this.fontStyle=e,this.foregroundId=t,this.backgroundId=s}}class fe{constructor(e,t,s,r,o,n){this.scope=e,this.parentScopes=t,this.index=s,this.fontStyle=r,this.foreground=o,this.background=n}}class be{constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,s=e.length;t<s;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}}class ye{constructor(e,t,s,r,o){this.scopeDepth=e,this.parentScopes=t,this.fontStyle=s,this.foreground=r,this.background=o}clone(){return new ye(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let s=0,r=e.length;s<r;s++)t[s]=e[s].clone();return t}acceptOverwrite(e,t,s,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==s&&(this.foreground=s),0!==r&&(this.background=r)}}class _e{constructor(e,t=[],s={}){this._mainRule=e,this._children=s,this._rulesWithParentScopes=t}static _sortBySpecificity(e){return 1===e.length||e.sort(this._cmpBySpecificity),e}static _cmpBySpecificity(e,t){if(e.scopeDepth===t.scopeDepth){const s=e.parentScopes,r=t.parentScopes;let o=null===s?0:s.length,n=null===r?0:r.length;if(o===n)for(let e=0;e<o;e++){const t=s[e].length,o=r[e].length;if(t!==o)return o-t}return n-o}return t.scopeDepth-e.scopeDepth}match(e){if(""===e)return _e._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let t,s,r=e.indexOf(".");return-1===r?(t=e,s=""):(t=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(t)?this._children[t].match(s):_e._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(e,t,s,r,o,n){if(""===t)return void this._doInsertHere(e,s,r,o,n);let c,a,i,u=t.indexOf(".");-1===u?(c=t,a=""):(c=t.substring(0,u),a=t.substring(u+1)),this._children.hasOwnProperty(c)?i=this._children[c]:(i=new _e(this._mainRule.clone(),ye.cloneArr(this._rulesWithParentScopes)),this._children[c]=i),i.insert(e+1,a,s,r,o,n)}_doInsertHere(e,t,s,r,o){if(null!==t){for(let n=0,c=this._rulesWithParentScopes.length;n<c;n++){let c=this._rulesWithParentScopes[n];if(0===G(c.parentScopes,t))return void c.acceptOverwrite(e,s,r,o)}-1===s&&(s=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===o&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new ye(e,t,s,r,o))}else this._mainRule.acceptOverwrite(e,s,r,o)}}class xe{constructor(e,t){this.languageId=e,this.tokenType=t}}class ke{constructor(e,t){this._getBasicScopeAttributes=new q((e=>{const t=this._scopeToLanguage(e),s=this._toStandardTokenType(e);return new xe(t,s)})),this._defaultAttributes=new xe(e,8),this._embeddedLanguagesMatcher=new je(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return null===e?ke._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(ke.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}ke._NULL_SCOPE_METADATA=new xe(0,0),ke.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class je{constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map((([e,t])=>F(e)));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);return t?this.values.get(t[1]):void 0}}class Se{constructor(e,t){this.stack=e,this.stoppedEarly=t}}function we(e,t,s,r,o,n,c,a){const i=t.content.length;let u=!1,l=-1;if(c){const c=function(e,t,s,r,o,n){let c=o.beginRuleCapturedEOL?0:-1;const a=[];for(let t=o;t;t=t.pop()){const s=t.getRule(e);s instanceof ae&&a.push({rule:s,stack:t})}for(let i=a.pop();i;i=a.pop()){const{ruleScanner:a,findOptions:u}=Le(i.rule,e,i.stack.endRule,s,r===c),l=a.findNextMatchSync(t,r,u);if(w&&(console.log("  scanning for while rule"),console.log(a.toString())),!l){w&&console.log("  popping "+i.rule.debugName+" - "+i.rule.debugWhileRegExp),o=i.stack.pop();break}if(-2!==l.ruleId){o=i.stack.pop();break}l.captureIndices&&l.captureIndices.length&&(n.produce(i.stack,l.captureIndices[0].start),Ce(e,t,s,i.stack,n,i.rule.whileCaptures,l.captureIndices),n.produce(i.stack,l.captureIndices[0].end),c=l.captureIndices[0].end,l.captureIndices[0].end>r&&(r=l.captureIndices[0].end,s=!1))}return{stack:o,linePos:r,anchorPosition:c,isFirstLine:s}}(e,t,s,r,o,n);o=c.stack,r=c.linePos,s=c.isFirstLine,l=c.anchorPosition}const h=Date.now();for(;!u;){if(0!==a&&Date.now()-h>a)return new Se(o,!0);d()}return new Se(o,!1);function d(){w&&(console.log(""),console.log(`@@scanNext ${r}: |${t.content.substr(r).replace(/\n$/,"\\n")}|`));const c=function(e,t,s,r,o,n){const c=function(e,t,s,r,o,n){const c=o.getRule(e),{ruleScanner:a,findOptions:i}=ve(c,e,o.endRule,s,r===n);let u=0;w&&(u=O());const l=a.findNextMatchSync(t,r,i);if(w){const e=O()-u;e>5&&console.warn(`Rule ${c.debugName} (${c.id}) matching took ${e} against '${t}'`),console.log(`  scanning for (linePos: ${r}, anchorPosition: ${n})`),console.log(a.toString()),l&&console.log(`matched rule id: ${l.ruleId} from ${l.captureIndices[0].start} to ${l.captureIndices[0].end}`)}return l?{captureIndices:l.captureIndices,matchedRuleId:l.ruleId}:null}(e,t,s,r,o,n),a=e.getInjections();if(0===a.length)return c;const i=function(e,t,s,r,o,n,c){let a,i=Number.MAX_VALUE,u=null,l=0;const h=n.contentNameScopesList.getScopeNames();for(let n=0,d=e.length;n<d;n++){const d=e[n];if(!d.matcher(h))continue;const p=t.getRule(d.ruleId),{ruleScanner:m,findOptions:g}=ve(p,t,null,r,o===c),f=m.findNextMatchSync(s,o,g);if(!f)continue;w&&(console.log(`  matched injection: ${d.debugSelector}`),console.log(m.toString()));const b=f.captureIndices[0].start;if(!(b>=i)&&(i=b,u=f.captureIndices,a=f.ruleId,l=d.priority,i===o))break}return u?{priorityMatch:-1===l,captureIndices:u,matchedRuleId:a}:null}(a,e,t,s,r,o,n);if(!i)return c;if(!c)return i;const u=c.captureIndices[0].start,l=i.captureIndices[0].start;return l<u||i.priorityMatch&&l===u?i:c}(e,t,s,r,o,l);if(!c)return w&&console.log("  no more matches."),n.produce(o,i),void(u=!0);const a=c.captureIndices,h=c.matchedRuleId,d=!!(a&&a.length>0)&&a[0].end>r;if(-1===h){const c=o.getRule(e);w&&console.log("  popping "+c.debugName+" - "+c.debugEndRegExp),n.produce(o,a[0].start),o=o.withContentNameScopesList(o.nameScopesList),Ce(e,t,s,o,n,c.endCaptures,a),n.produce(o,a[0].end);const h=o;if(o=o.parent,l=h.getAnchorPos(),!d&&h.getEnterPos()===r)return w&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),o=h,n.produce(o,i),void(u=!0)}else{const c=e.getRule(h);n.produce(o,a[0].start);const p=o,m=c.getName(t.content,a),g=o.contentNameScopesList.pushAttributed(m,e);if(o=o.push(h,r,l,a[0].end===i,null,g,g),c instanceof ce){const r=c;w&&console.log("  pushing "+r.debugName+" - "+r.debugBeginRegExp),Ce(e,t,s,o,n,r.beginCaptures,a),n.produce(o,a[0].end),l=a[0].end;const h=r.getContentName(t.content,a),m=g.pushAttributed(h,e);if(o=o.withContentNameScopesList(m),r.endHasBackReferences&&(o=o.withEndRule(r.getEndWithResolvedBackReferences(t.content,a))),!d&&p.hasSameRuleAs(o))return w&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),o=o.pop(),n.produce(o,i),void(u=!0)}else if(c instanceof ae){const r=c;w&&console.log("  pushing "+r.debugName),Ce(e,t,s,o,n,r.beginCaptures,a),n.produce(o,a[0].end),l=a[0].end;const h=r.getContentName(t.content,a),m=g.pushAttributed(h,e);if(o=o.withContentNameScopesList(m),r.whileHasBackReferences&&(o=o.withEndRule(r.getWhileWithResolvedBackReferences(t.content,a))),!d&&p.hasSameRuleAs(o))return w&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),o=o.pop(),n.produce(o,i),void(u=!0)}else{const r=c;if(w&&console.log("  matched "+r.debugName+" - "+r.debugMatchRegExp),Ce(e,t,s,o,n,r.captures,a),n.produce(o,a[0].end),o=o.pop(),!d)return w&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),o=o.safePop(),n.produce(o,i),void(u=!0)}}a[0].end>r&&(r=a[0].end,s=!1)}}function ve(e,t,s,r,o){return{ruleScanner:e.compileAG(t,s,r,o),findOptions:0}}function Le(e,t,s,r,o){return{ruleScanner:e.compileWhileAG(t,s,r,o),findOptions:0}}function Ce(e,t,s,r,o,n,c){if(0===n.length)return;const a=t.content,i=Math.min(n.length,c.length),u=[],l=c[0].end;for(let t=0;t<i;t++){const i=n[t];if(null===i)continue;const h=c[t];if(0===h.length)continue;if(h.start>l)break;for(;u.length>0&&u[u.length-1].endPos<=h.start;)o.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?o.produceFromScopes(u[u.length-1].scopes,h.start):o.produce(r,h.start),i.retokenizeCapturedWithRuleId){const t=i.getName(a,c),n=r.contentNameScopesList.pushAttributed(t,e),u=i.getContentName(a,c),l=n.pushAttributed(u,e),d=r.push(i.retokenizeCapturedWithRuleId,h.start,-1,!1,null,n,l),p=e.createOnigString(a.substring(0,h.end));we(e,p,s&&0===h.start,h.start,d,o,!1,0),A(p);continue}const d=i.getName(a,c);if(null!==d){const t=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).pushAttributed(d,e);u.push(new Ae(t,h.end))}}for(;u.length>0;)o.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}class Ae{constructor(e,t){this.scopes=e,this.endPos=t}}function Ne(e,t,s,r,o){const n=L(t,Pe),c=ie.getCompiledRuleId(s,r,o.repository);for(const s of n)e.push({debugSelector:t,matcher:s.matcher,ruleId:c,grammar:o,priority:s.priority})}function Pe(e,t){if(t.length<e.length)return!1;let s=0;return e.every((e=>{for(let r=s;r<t.length;r++)if(Re(t[r],e))return s=r+1,!0;return!1}))}function Re(e,t){if(!e)return!1;if(e===t)return!0;const s=t.length;return e.length>s&&e.substr(0,s)===t&&"."===e[s]}class Ie{constructor(e,t,s,r,o,n,c,a){if(this._rootScopeName=e,this.balancedBracketSelectors=n,this._onigLib=a,this._basicScopeAttributesProvider=new ke(s,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=c,this._grammar=Ee(t,null),this._injections=null,this._tokenTypeMatchers=[],o)for(const e of Object.keys(o)){const t=L(e,Pe);for(const s of t)this._tokenTypeMatchers.push({matcher:s.matcher,type:o[e]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e=[],t=this._rootScopeName,s=(e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e))(t);if(s){const r=s.injections;if(r)for(let t in r)Ne(e,t,r[t],this,s);const o=this._grammarRepository.injections(t);o&&o.forEach((t=>{const s=this.getExternalGrammar(t);if(s){const t=s.injectionSelector;t&&Ne(e,t,s,this,s)}}))}return e.sort(((e,t)=>e.priority-t.priority)),e}getInjections(){if(null===this._injections&&(this._injections=this._collectInjections(),w&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const e of this._injections)console.log(`  - ${e.debugSelector}`)}return this._injections}registerRule(e){const t=++this._lastRuleId,s=e(t);return this._ruleId2desc[t]=s,s}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const s=this._grammarRepository.lookup(e);if(s)return this._includedGrammars[e]=Ee(s,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,s=0){const r=this._tokenize(e,t,!1,s);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,s=0){const r=this._tokenize(e,t,!0,s);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,s,r){let o;if(-1===this._rootId&&(this._rootId=ie.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==Ge.NULL)o=!1,t.reset();else{o=!0;const e=this._basicScopeAttributesProvider.getDefaultAttributes(),s=this.themeProvider.getDefaults(),r=v.set(0,e.languageId,e.tokenType,null,s.fontStyle,s.foregroundId,s.backgroundId),n=this.getRule(this._rootId).getName(null,null);let c;c=n?Be.createRootAndLookUpScopeName(n,r,this):Be.createRoot("unknown",r),t=new Ge(null,this._rootId,-1,-1,!1,null,c,c)}e+="\n";const n=this.createOnigString(e),c=n.content.length,a=new Fe(s,e,this._tokenTypeMatchers,this.balancedBracketSelectors),i=we(this,n,o,0,t,a,!0,r);return A(n),{lineLength:c,lineTokens:a,ruleStack:i.stack,stoppedEarly:i.stoppedEarly}}}function Ee(e,t){return(e=N(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}class Be{constructor(e,t,s){this.parent=e,this.scopePath=t,this.tokenAttributes=s}static fromExtension(e,t){let s=e,r=e?.scopePath??null;for(const e of t)r=pe.push(r,e.scopeNames),s=new Be(s,r,e.encodedTokenAttributes);return s}static createRoot(e,t){return new Be(null,new pe(null,e),t)}static createRootAndLookUpScopeName(e,t,s){const r=s.getMetadataForScope(e),o=new pe(null,e),n=s.themeProvider.themeMatch(o),c=Be.mergeAttributes(t,r,n);return new Be(null,o,c)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Be.equals(this,e)}static equals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,s){let r=-1,o=0,n=0;return null!==s&&(r=s.fontStyle,o=s.foregroundId,n=s.backgroundId),v.set(e,t.languageId,t.tokenType,null,r,o,n)}pushAttributed(e,t){if(null===e)return this;if(-1===e.indexOf(" "))return Be._pushAttributed(this,e,t);const s=e.split(/ /g);let r=this;for(const e of s)r=Be._pushAttributed(r,e,t);return r}static _pushAttributed(e,t,s){const r=s.getMetadataForScope(t),o=e.scopePath.push(t),n=s.themeProvider.themeMatch(o),c=Be.mergeAttributes(e.tokenAttributes,r,n);return new Be(e,o,c)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push({encodedTokenAttributes:s.tokenAttributes,scopeNames:s.scopePath.getExtensionIfDefined(s.parent?.scopePath??null)}),s=s.parent;return s===e?t.reverse():void 0}}class Ge{constructor(e,t,s,r,o,n,c,a){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=o,this.endRule=n,this.nameScopesList=c,this.contentNameScopesList=a,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=s,this._anchorPos=r}equals(e){return null!==e&&Ge._equals(this,e)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&Be.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Ge._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,s,r,o,n,c){return new Ge(this,e,t,s,r,o,n,c)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Ge(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,t){const s=Be.fromExtension(e?.nameScopesList??null,t.nameScopesList);return new Ge(e,t.ruleId,t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,s,Be.fromExtension(s,t.contentNameScopesList))}}Ge.NULL=new Ge(null,0,0,0,!1,null,null,null);class Te{constructor(e,t){this.allowAny=!1,this.balancedBracketScopes=e.flatMap((e=>"*"===e?(this.allowAny=!0,[]):L(e,Pe).map((e=>e.matcher)))),this.unbalancedBracketScopes=t.flatMap((e=>L(e,Pe).map((e=>e.matcher))))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}}class Fe{constructor(e,t,s,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=s,this._lineText=w?t:null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let s=e?.tokenAttributes??0,r=!1;if(this.balancedBracketSelectors?.matchesAlways&&(r=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const t=e?.getScopeNames()??[];for(const e of this._tokenTypeOverrides)e.matcher(t)&&(s=v.set(s,0,e.type,null,-1,0,0));this.balancedBracketSelectors&&(r=this.balancedBracketSelectors.match(t))}if(r&&(s=v.set(s,0,8,r,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s)return void(this._lastTokenEndIndex=t);if(w){const s=e?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<s.length;e++)console.log("      * "+s[e])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),void(this._lastTokenEndIndex=t)}const s=e?.getScopeNames()??[];if(w){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<s.length;e++)console.log("      * "+s[e])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:s}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const s=new Uint32Array(this._binaryTokens.length);for(let e=0,t=this._binaryTokens.length;e<t;e++)s[e]=this._binaryTokens[e];return s}}function qe(e,t,s){const r=e.length;let o=0,n=1,c=0;function a(t){if(null===s)o+=t;else for(;t>0;)10===e.charCodeAt(o)?(o++,n++,c=0):(o++,c++),t--}function i(e){null===s?o=e:a(e-o)}function u(){for(;o<r;){let t=e.charCodeAt(o);if(32!==t&&9!==t&&13!==t&&10!==t)break;a(1)}}function l(t){return e.substr(o,t.length)===t&&(a(t.length),!0)}function h(t){let s=e.indexOf(t,o);i(-1!==s?s+t.length:r)}function d(t){let s=e.indexOf(t,o);if(-1!==s){let r=e.substring(o,s);return i(s+t.length),r}{let t=e.substr(o);return i(r),t}}r>0&&65279===e.charCodeAt(0)&&(o=1);let p=0,m=null,g=[],f=[],b=null;function y(e,t){g.push(p),f.push(m),p=e,m=t}function _(){if(0===g.length)return x("illegal state stack");p=g.pop(),m=f.pop()}function x(t){throw new Error("Near offset "+o+": "+t+" ~~~"+e.substr(o,50)+"~~~")}const k=function(){if(null===b)return x("missing <key>");let e={};null!==s&&(e[s]={filename:t,line:n,char:c}),m[b]=e,b=null,y(1,e)},j=function(){if(null===b)return x("missing <key>");let e=[];m[b]=e,b=null,y(2,e)},S=function(){let e={};null!==s&&(e[s]={filename:t,line:n,char:c}),m.push(e),y(1,e)},w=function(){let e=[];m.push(e),y(2,e)};function v(){if(1!==p)return x("unexpected </dict>");_()}function L(){return 1===p||2!==p?x("unexpected </array>"):void _()}function C(e){if(1===p){if(null===b)return x("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function A(e){if(isNaN(e))return x("cannot parse float");if(1===p){if(null===b)return x("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function N(e){if(isNaN(e))return x("cannot parse integer");if(1===p){if(null===b)return x("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function P(e){if(1===p){if(null===b)return x("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function R(e){if(1===p){if(null===b)return x("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function I(e){if(1===p){if(null===b)return x("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function E(){let e=d(">"),t=!1;return 47===e.charCodeAt(e.length-1)&&(t=!0,e=e.substring(0,e.length-1)),{name:e.trim(),isClosed:t}}function B(e){if(e.isClosed)return"";let t=d("</");return h(">"),t.replace(/&#([0-9]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,10))})).replace(/&#x([0-9a-f]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,(function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e}))}for(;o<r&&(u(),!(o>=r));){const i=e.charCodeAt(o);if(a(1),60!==i)return x("expected <");if(o>=r)return x("unexpected end of input");const d=e.charCodeAt(o);if(63===d){a(1),h("?>");continue}if(33===d){if(a(1),l("--")){h("--\x3e");continue}h(">");continue}if(47===d){if(a(1),u(),l("plist")){h(">");continue}if(l("dict")){h(">"),v();continue}if(l("array")){h(">"),L();continue}return x("unexpected closed tag")}let g=E();switch(g.name){case"dict":1===p?k():2===p?S():(m={},null!==s&&(m[s]={filename:t,line:n,char:c}),y(1,m)),g.isClosed&&v();continue;case"array":1===p?j():2===p?w():(m=[],y(2,m)),g.isClosed&&L();continue;case"key":G=B(g),1!==p?x("unexpected <key>"):null!==b?x("too many <key>"):b=G;continue;case"string":C(B(g));continue;case"real":A(parseFloat(B(g)));continue;case"integer":N(parseInt(B(g),10));continue;case"date":P(new Date(B(g)));continue;case"data":R(B(g));continue;case"true":B(g),I(!0);continue;case"false":B(g),I(!1);continue}if(!/^plist/.test(g.name))return x("unexpected opened tag "+g.name)}var G;return m}function Oe(e,t){throw new Error("Near offset "+e.pos+": "+t+" ~~~"+e.source.substr(e.pos,50)+"~~~")}class $e{constructor(e){this.source=e,this.pos=0,this.len=e.length,this.line=1,this.char=0}}class Me{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(e){return{filename:e,line:this.line,char:this.char}}}function Ue(e,t){t.value=null,t.type=0,t.offset=-1,t.len=-1,t.line=-1,t.char=-1;let s,r=e.source,o=e.pos,n=e.len,c=e.line,a=e.char;for(;;){if(o>=n)return!1;if(s=r.charCodeAt(o),32!==s&&9!==s&&13!==s){if(10!==s)break;o++,c++,a=0}else o++,a++}if(t.offset=o,t.line=c,t.char=a,34===s){for(t.type=1,o++,a++;;){if(o>=n)return!1;if(s=r.charCodeAt(o),o++,a++,92!==s){if(34===s)break}else o++,a++}t.value=r.substring(t.offset+1,o-1).replace(/\\u([0-9A-Fa-f]{4})/g,((e,t)=>String.fromCodePoint(parseInt(t,16)))).replace(/\\(.)/g,((t,s)=>{switch(s){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:Oe(e,"invalid escape sequence")}throw new Error("unreachable")}))}else if(91===s)t.type=2,o++,a++;else if(123===s)t.type=3,o++,a++;else if(93===s)t.type=4,o++,a++;else if(125===s)t.type=5,o++,a++;else if(58===s)t.type=6,o++,a++;else if(44===s)t.type=7,o++,a++;else if(110===s){if(t.type=8,o++,a++,s=r.charCodeAt(o),117!==s)return!1;if(o++,a++,s=r.charCodeAt(o),108!==s)return!1;if(o++,a++,s=r.charCodeAt(o),108!==s)return!1;o++,a++}else if(116===s){if(t.type=9,o++,a++,s=r.charCodeAt(o),114!==s)return!1;if(o++,a++,s=r.charCodeAt(o),117!==s)return!1;if(o++,a++,s=r.charCodeAt(o),101!==s)return!1;o++,a++}else if(102===s){if(t.type=10,o++,a++,s=r.charCodeAt(o),97!==s)return!1;if(o++,a++,s=r.charCodeAt(o),108!==s)return!1;if(o++,a++,s=r.charCodeAt(o),115!==s)return!1;if(o++,a++,s=r.charCodeAt(o),101!==s)return!1;o++,a++}else for(t.type=11;;){if(o>=n)return!1;if(s=r.charCodeAt(o),!(46===s||s>=48&&s<=57||101===s||69===s||45===s||43===s))break;o++,a++}return t.len=o-t.offset,null===t.value&&(t.value=r.substr(t.offset,t.len)),e.pos=o,e.line=c,e.char=a,!0}class We{constructor(e,t){this._onigLibPromise=t,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}async grammarForScopeName(e,t,s,r,o){if(!this._grammars.has(e)){let n=this._rawGrammars.get(e);if(!n)return null;this._grammars.set(e,function(e,t,s,r,o,n,c,a){return new Ie(e,t,s,r,o,n,c,a)}(e,n,t,s,r,o,this,await this._onigLibPromise))}return this._grammars.get(e)}}function De(e,t){let s=0;const r=[];let o=e,n=t;for(;o!==n;)o&&(!n||o.depth>=n.depth)?(s++,o=o.parent):(r.push(n.toStateStackFrame()),n=n.parent);return{pops:s,newFrames:r.reverse()}}function ze(e,t){let s=e;for(let e=0;e<t.pops;e++)s=s.parent;for(const e of t.newFrames)s=Ge.pushFrame(s,e);return s}class He{constructor(e){this._options=e,this._syncRegistry=new We(de.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(de.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,s){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:s})}loadGrammarWithConfiguration(e,t,s){return this._loadGrammar(e,t,s.embeddedLanguages,s.tokenTypes,new Te(s.balancedBracketSelectors||[],s.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}async _loadGrammar(e,t,s,r,o){const n=new W(this._syncRegistry,e);for(;n.Q.length>0;)await Promise.all(n.Q.map((e=>this._loadSingleGrammar(e.scopeName)))),n.processQueue();return this._grammarForScopeName(e,t,s,r,o)}async _loadSingleGrammar(e){return this._ensureGrammarCache.has(e)||this._ensureGrammarCache.set(e,this._doLoadSingleGrammar(e)),this._ensureGrammarCache.get(e)}async _doLoadSingleGrammar(e){const t=await this._options.loadGrammar(e);if(t){const s="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,s)}}async addGrammar(e,t=[],s=0,r=null){return this._syncRegistry.addGrammar(e,t),await this._grammarForScopeName(e.scopeName,s,r)}_grammarForScopeName(e,t=0,s=null,r=null,o=null){return this._syncRegistry.grammarForScopeName(e,t,s,r,o)}}const Qe=Ge.NULL,Ke=function(e,t=null){return null!==t&&/\.json$/.test(t)?(s=e,w?function(e,t,s){let r=new $e(e),o=new Me,n=0,c=null,a=[],i=[];function u(){a.push(n),i.push(c)}function l(){n=a.pop(),c=i.pop()}function h(e){Oe(r,e)}for(;Ue(r,o);){if(0===n){if(null!==c&&h("too many constructs in root"),3===o.type){c={},c.$vscodeTextmateLocation=o.toLocation(t),u(),n=1;continue}if(2===o.type){c=[],u(),n=4;continue}h("unexpected token in root")}if(2===n){if(5===o.type){l();continue}if(7===o.type){n=3;continue}h("expected , or }")}if(1===n||3===n){if(1===n&&5===o.type){l();continue}if(1===o.type){let e=o.value;if(Ue(r,o)&&6===o.type||h("expected colon"),Ue(r,o)||h("expected value"),n=2,1===o.type){c[e]=o.value;continue}if(8===o.type){c[e]=null;continue}if(9===o.type){c[e]=!0;continue}if(10===o.type){c[e]=!1;continue}if(11===o.type){c[e]=parseFloat(o.value);continue}if(2===o.type){let t=[];c[e]=t,u(),n=4,c=t;continue}if(3===o.type){let s={};s.$vscodeTextmateLocation=o.toLocation(t),c[e]=s,u(),n=1,c=s;continue}}h("unexpected token in dict")}if(5===n){if(4===o.type){l();continue}if(7===o.type){n=6;continue}h("expected , or ]")}if(4===n||6===n){if(4===n&&4===o.type){l();continue}if(n=5,1===o.type){c.push(o.value);continue}if(8===o.type){c.push(null);continue}if(9===o.type){c.push(!0);continue}if(10===o.type){c.push(!1);continue}if(11===o.type){c.push(parseFloat(o.value));continue}if(2===o.type){let e=[];c.push(e),u(),n=4,c=e;continue}if(3===o.type){let e={};e.$vscodeTextmateLocation=o.toLocation(t),c.push(e),u(),n=1,c=e;continue}h("unexpected token in array")}h("unknown state")}return 0!==i.length&&h("unclosed constructs"),c}(s,t):JSON.parse(s)):function(e,t){return w?function(e,t,s){return qe(e,t,"$vscodeTextmateLocation")}(e,t):function(e){return qe(e,null,null)}(e)}(e,t);var s};var Ve=S.Bz,Ye=("undefined"!=typeof document&&document.currentScript&&document.currentScript.src,function(e){var t,s,r=void 0!==(e=e||{})?e:{};r.ready=new Promise((function(e,r){t=e,s=r}));var o,n=Object.assign({},r),c=!1;o=function(e){let t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),"object"==typeof t||S(s),t);var s},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof onig_print&&("undefined"==typeof console&&(console={}),console.log=onig_print,console.warn=console.error="undefined"!=typeof printErr?printErr:onig_print);var a,i,u=r.print||console.log.bind(console),l=r.printErr||console.warn.bind(console);Object.assign(r,n),n=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit,r.wasmBinary&&(a=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&S("no native wasm support detected");var h,d,p,m=!1,g="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function f(e,t,s){for(var r=t+s,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.buffer&&g)return g.decode(e.subarray(t,o));for(var n="";t<o;){var c=e[t++];if(128&c){var a=63&e[t++];if(192!=(224&c)){var i=63&e[t++];if((c=224==(240&c)?(15&c)<<12|a<<6|i:(7&c)<<18|a<<12|i<<6|63&e[t++])<65536)n+=String.fromCharCode(c);else{var u=c-65536;n+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else n+=String.fromCharCode((31&c)<<6|a)}else n+=String.fromCharCode(c)}return n}function b(e){h=e,r.HEAP8=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=new Int32Array(e),r.HEAPU8=d=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=p=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e)}r.INITIAL_MEMORY;var y=[],_=[],x=[],k=0,j=null;function S(e){r.onAbort&&r.onAbort(e),l(e="Aborted("+e+")"),m=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw s(t),t}var w,v,L,C="data:application/octet-stream;base64,";function A(e){return e.startsWith(C)}function N(e){try{if(e==w&&a)return new Uint8Array(a);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){S(e)}}function P(e){for(;e.length>0;)e.shift()(r)}function R(e){try{return i.grow(e-h.byteLength+65535>>>16),b(i.buffer),1}catch(e){}}A(w="onig.wasm")||(v=w,w=r.locateFile?r.locateFile(v,""):""+v),L="undefined"!=typeof dateNow?dateNow:()=>performance.now();var I=[null,[],[]];function E(e,t){var s=I[e];0===t||10===t?((1===e?u:l)(f(s,0)),s.length=0):s.push(t)}var B,G={emscripten_get_now:L,emscripten_memcpy_big:function(e,t,s){d.copyWithin(e,t,t+s)},emscripten_resize_heap:function(e){var t=d.length,s=2147483648;if((e>>>=0)>s)return!1;let r=(e,t)=>e+(t-e%t)%t;for(var o=1;o<=4;o*=2){var n=t*(1+.2/o);if(n=Math.min(n,e+100663296),R(Math.min(s,r(Math.max(e,n),65536))))return!0}return!1},fd_write:function(e,t,s,r){for(var o=0,n=0;n<s;n++){var c=p[t>>2],a=p[t+4>>2];t+=8;for(var i=0;i<a;i++)E(e,d[c+i]);o+=a}return p[r>>2]=o,0}};function T(e){function s(){B||(B=!0,r.calledRun=!0,m||(P(_),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),x.unshift(e);var e;P(x)}()))}k>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),y.unshift(e);var e;P(y)}(),k>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),s()}),1)):s()))}if(function(){var e={env:G,wasi_snapshot_preview1:G};function t(e,t){var s,o=e.exports;r.asm=o,b((i=r.asm.memory).buffer),r.asm.__indirect_function_table,s=r.asm.__wasm_call_ctors,_.unshift(s),function(e){if(k--,r.monitorRunDependencies&&r.monitorRunDependencies(k),0==k&&j){var t=j;j=null,t()}}()}function o(e){t(e.instance)}function n(t){return(!a&&c&&"function"==typeof fetch?fetch(w,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+w+"'";return e.arrayBuffer()})).catch((function(){return N(w)})):Promise.resolve().then((function(){return N(w)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){l("failed to asynchronously prepare wasm: "+e),S(e)}))}if(k++,r.monitorRunDependencies&&r.monitorRunDependencies(k),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){l("Module.instantiateWasm callback failed with error: "+e),s(e)}(a||"function"!=typeof WebAssembly.instantiateStreaming||A(w)||"function"!=typeof fetch?n(o):fetch(w,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(o,(function(e){return l("wasm streaming compile failed: "+e),l("falling back to ArrayBuffer instantiation"),n(o)}))}))).catch(s)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)},r._omalloc=function(){return(r._omalloc=r.asm.omalloc).apply(null,arguments)},r._ofree=function(){return(r._ofree=r.asm.ofree).apply(null,arguments)},r._getLastOnigError=function(){return(r._getLastOnigError=r.asm.getLastOnigError).apply(null,arguments)},r._createOnigScanner=function(){return(r._createOnigScanner=r.asm.createOnigScanner).apply(null,arguments)},r._freeOnigScanner=function(){return(r._freeOnigScanner=r.asm.freeOnigScanner).apply(null,arguments)},r._findNextOnigScannerMatch=function(){return(r._findNextOnigScannerMatch=r.asm.findNextOnigScannerMatch).apply(null,arguments)},r._findNextOnigScannerMatchDbg=function(){return(r._findNextOnigScannerMatchDbg=r.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},r.stackSave=function(){return(r.stackSave=r.asm.stackSave).apply(null,arguments)},r.stackRestore=function(){return(r.stackRestore=r.asm.stackRestore).apply(null,arguments)},r.stackAlloc=function(){return(r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.dynCall_jiji).apply(null,arguments)},r.UTF8ToString=function(e,t){return e?f(d,e,t):""},j=function e(){B||T(),B||(j=e)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return T(),e.ready});let Xe=null;class Je{static _utf8ByteLength(e){let t=0;for(let s=0,r=e.length;s<r;s++){const o=e.charCodeAt(s);let n=o,c=!1;if(o>=55296&&o<=56319&&s+1<r){const t=e.charCodeAt(s+1);t>=56320&&t<=57343&&(n=65536+(o-55296<<10)|t-56320,c=!0)}t+=n<=127?1:n<=2047?2:n<=65535?3:4,c&&s++}return t}constructor(e){const t=e.length,s=Je._utf8ByteLength(e),r=s!==t,o=r?new Uint32Array(t+1):null;r&&(o[t]=s);const n=r?new Uint32Array(s+1):null;r&&(n[s]=t);const c=new Uint8Array(s);let a=0;for(let s=0;s<t;s++){const i=e.charCodeAt(s);let u=i,l=!1;if(i>=55296&&i<=56319&&s+1<t){const t=e.charCodeAt(s+1);t>=56320&&t<=57343&&(u=65536+(i-55296<<10)|t-56320,l=!0)}r&&(o[s]=a,l&&(o[s+1]=a),u<=127?n[a+0]=s:u<=2047?(n[a+0]=s,n[a+1]=s):u<=65535?(n[a+0]=s,n[a+1]=s,n[a+2]=s):(n[a+0]=s,n[a+1]=s,n[a+2]=s,n[a+3]=s)),u<=127?c[a++]=u:u<=2047?(c[a++]=192|(1984&u)>>>6,c[a++]=128|(63&u)>>>0):u<=65535?(c[a++]=224|(61440&u)>>>12,c[a++]=128|(4032&u)>>>6,c[a++]=128|(63&u)>>>0):(c[a++]=240|(1835008&u)>>>18,c[a++]=128|(258048&u)>>>12,c[a++]=128|(4032&u)>>>6,c[a++]=128|(63&u)>>>0),l&&s++}this.utf16Length=t,this.utf8Length=s,this.utf16Value=e,this.utf8Value=c,this.utf16OffsetToUtf8=o,this.utf8OffsetToUtf16=n}createString(e){const t=e._omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}class Ze{constructor(e){if(this.id=++Ze.LAST_ID,!Xe)throw new Error("Must invoke loadWASM first.");this._onigBinding=Xe,this.content=e;const t=new Je(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!Ze._sharedPtrInUse?(Ze._sharedPtr||(Ze._sharedPtr=Xe._omalloc(1e4)),Ze._sharedPtrInUse=!0,Xe.HEAPU8.set(t.utf8Value,Ze._sharedPtr),this.ptr=Ze._sharedPtr):this.ptr=t.createString(Xe)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Ze._sharedPtr?Ze._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}Ze.LAST_ID=0,Ze._sharedPtr=0,Ze._sharedPtrInUse=!1;class et{constructor(e){if(!Xe)throw new Error("Must invoke loadWASM first.");const t=[],s=[];for(let r=0,o=e.length;r<o;r++){const o=new Je(e[r]);t[r]=o.createString(Xe),s[r]=o.utf8Length}const r=Xe._omalloc(4*e.length);Xe.HEAPU32.set(t,r/4);const o=Xe._omalloc(4*e.length);Xe.HEAPU32.set(s,o/4);const n=Xe._createOnigScanner(r,o,e.length);for(let s=0,r=e.length;s<r;s++)Xe._ofree(t[s]);Xe._ofree(o),Xe._ofree(r),0===n&&function(e){throw new Error(e.UTF8ToString(e._getLastOnigError()))}(Xe),this._onigBinding=Xe,this._ptr=n}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(e,t,s){let r=false,o=0;if("number"==typeof s?(8&s&&(r=!0),o=s):"boolean"==typeof s&&(r=s),"string"==typeof e){e=new Ze(e);const s=this._findNextMatchSync(e,t,r,o);return e.dispose(),s}return this._findNextMatchSync(e,t,r,o)}_findNextMatchSync(e,t,s,r){const o=this._onigBinding;let n;if(n=s?o._findNextOnigScannerMatchDbg(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r):o._findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r),0===n)return null;const c=o.HEAPU32;let a=n/4;const i=c[a++],u=c[a++];let l=[];for(let t=0;t<u;t++){const s=e.convertUtf8OffsetToUtf16(c[a++]),r=e.convertUtf8OffsetToUtf16(c[a++]);l[t]={start:s,end:r,length:r-s}}return{index:i,captureIndices:l}}}let tt=!1,st=null;function rt(e){if(tt)return st;let t,s,r,o;if(tt=!0,function(e){return"function"==typeof e.instantiator}(e))t=e.instantiator,s=e.print;else{let r;!function(e){return void 0!==e.data}(e)?r=e:(r=e.data,s=e.print),t=function(e){return"undefined"!=typeof Response&&e instanceof Response}(r)?"function"==typeof WebAssembly.instantiateStreaming?function(e){return t=>WebAssembly.instantiateStreaming(e,t)}(r):function(e){return async t=>{const s=await e.arrayBuffer();return WebAssembly.instantiate(s,t)}}(r):function(e){return t=>WebAssembly.instantiate(e,t)}(r)}return st=new Promise(((e,t)=>{r=e,o=t})),function(e,t,s,r){Ye({print:t,instantiateWasm:(t,s)=>{if("undefined"==typeof performance){const e=()=>Date.now();t.env.emscripten_get_now=e,t.wasi_snapshot_preview1.emscripten_get_now=e}return e(t).then((e=>s(e.instance)),r),{}}}).then((e=>{Xe=e,s()}))}(t,s,r,o),st}function ot(e){return new Ze(e)}function nt(e){return new et(e)}function ct(e){const t=x[e];if(!t)return;const{id:s}=k[t];return{id:s,scopeName:t}}const at=new Map;let it,ut;async function lt(e){if(at.has(e))return at.get(e);const t=function(e){return k[e]}(e);if(!t)return Promise.resolve(void 0);let r;if(void 0===it&&(r=ht(t.path),it=r.then((()=>!0)).catch((()=>!1))),void 0===ut&&(ut=await it),ut){const s=r||ht(t.path);return at.set(e,s),s}const o=s(`grammars/${t.id}`);t.embeddedScopes.forEach((e=>{if(!at.has(e)){const t=o.then((t=>t.find((t=>t.scopeName===e))));at.set(e,t)}}));const n=o.then((t=>t.find((t=>t.scopeName===e))));return at.set(e,n),n}async function ht(e){return await t()}const dt=30720,pt=16744448,mt=16775168,gt=11,ft=15,bt={NotSet:-1,None:0,Italic:1,Bold:2,Underline:4,Strikethrough:8};function yt(e,t,s,r){const{tokens:o,ruleStack:n}=e.tokenizeLine2(s,t),c=[];let a=s.length;for(let e=o.length-2;e>=0;e-=2){const t=o[e],r=o[e+1],n=s.slice(t,a);c.unshift({content:n,metadata:r}),a=t}let i=[];if(null==r?void 0:r.preserveWhitespace)i=c;else for(let e=0;e<c.length;e++){const t=c[e];if(""!==t.content.trim()){const e=i[i.length-1];e&&(e.metadata&mt)==(t.metadata&mt)?e.content+=t.content:i.push(t)}else i.length>0?i[i.length-1].content+=t.content:e<c.length-1?c[e+1].content=t.content+c[e+1].content:i.push(t)}return{rawTokens:i,nextStack:n}}function _t(e,t){const s={color:t[(e&pt)>>>ft]},r=(e&dt)>>>gt;return r&bt.Italic&&(s.fontStyle="italic"),r&bt.Bold&&(s.fontWeight="bold"),r&bt.Underline&&(s.textDecoration="underline"),r&bt.Strikethrough&&(s.textDecoration="line-through"),s}var xt={instantiator:t=>WebAssembly.instantiate(e,t).then((e=>({instance:e})))};let kt=null;function jt(e){return"text"==e||"terminal"==e}function St(e){if(!kt){const e=rt(xt).then((()=>({createOnigScanner:nt,createOnigString:ot})));kt=new Ve({onigLib:e,loadGrammar:e=>lt(e)})}const t=e.filter((e=>!jt(e))).map((e=>{const t=ct(e);if(!t)throw new vt(e);return kt.loadGrammar(t.scopeName)}));return Promise.all(t)}function wt(e){if(jt(e))return{langId:e,grammar:null};const t=ct(e);if(!t)throw new vt(e);const s=function(e){const{_syncRegistry:t}=kt;return null==t?void 0:t._grammars.get(e)}(t.scopeName);if(!s)throw new Error(`Syntax highlighting error: grammar for ${e} not loaded`);return{langId:t.id,grammar:s}}class vt extends Error{constructor(e){super(`Unknown language: ${e}`),this.alias=e}}function Lt(e,t,s){kt.setTheme(s);const r=function(e){const t=kt.getColorMap();return e.colorNames?t.map((t=>Object.keys(e.colorNames).find((s=>e.colorNames[s].toUpperCase()===t.toUpperCase()))||t)):t}(s);return function(e,t,s){let r=null;return e.split(/\r?\n|\r/g).map((e=>{const{rawTokens:o,nextStack:n}=yt(t,r,e);return r=n,o.map((({content:e,metadata:t})=>({content:e,style:_t(t,s)})))}))}(e,t,r)}function Ct(e,t,s){kt.setTheme(s);return function(e,t,s){let r=null;return e.split(/\r?\n|\r/g).map((e=>{const{rawTokens:o,nextStack:n}=yt(t,r,e,{preserveWhitespace:!0}),c=o.map((({content:e,metadata:t})=>({content:e,style:_t(t,s)}))),a=function(e,t,s,r){const{tokens:o}=s.tokenizeLine(e,t),n=[];for(let t=0;t<o.length;t++){const{startIndex:s,endIndex:c,scopes:a}=o[t];let i=0;const u=r.find((e=>{if(i+=e.content.length,s<i)return!0}));n.push({...u,content:e.slice(s,c),scopes:a.reverse()})}return n}(e,r,t,c);return r=n,a}))}(e,t,kt.getColorMap())}function At(e){return e.split(/\r?\n|\r/g).map((e=>[{content:e,style:{}}]))}function Nt(e,t){if(!e)return[{fromLineNumber:t,toLineNumber:t}];if(e.startsWith("["))return Pt(e,t);return It(e.slice(1,-1)).map((e=>{if(e.includes("[")){const[s,r]=e.split("["),o=Number(s),n=t+o-1;if(!Et(n))throw new Bt(s);return Pt("["+r,n)}const{from:s,to:r}=Rt(e);return[{fromLineNumber:s+t-1,toLineNumber:r+t-1}]})).flat()}function Pt(e,t){return It(e.slice(1,-1)).map((e=>{const{from:s,to:r}=Rt(e);return{lineNumber:t,fromColumn:s,toColumn:r}}))}function Rt(e){const[t,s]=e.split(":");if(!Et(t))throw new Bt(t);const r=Number(t);if(r<1)throw new Gt;if(s){if(!Et(s))throw new Bt(s);return{from:r,to:+s}}return{from:r,to:r}}function It(e){return e.split(/,(?![^\[]*\])/g)}function Et(e){e=e.toString();var t=Math.abs(e),s=parseInt(e,10);return!isNaN(t)&&s===t&&t.toString()===e}class Bt extends Error{constructor(e){super(`Invalid number "${e}" in range string`),this.number=e,Object.setPrototypeOf(this,new.target.prototype)}}class Gt extends Error{constructor(){super("Invalid line or column number in range string"),Object.setPrototypeOf(this,new.target.prototype)}}const Tt="#001",Ft="#010",qt={name:"comments",type:"light",foreground:"",background:"",colors:{},settings:[{settings:{foreground:"#000"}},{scope:["punctuation.definition.comment"],settings:{foreground:Tt}},{scope:"comment",settings:{foreground:Ft}}]};function Ot(e,t,s,r){const o=t?Lt(e,t,qt):At(e),n=[];let c=1;const a=o.map((e=>{const{annotations:t,lineWithoutComments:o}=function(e,t,s){if(!e.some((e=>e.style.color===Tt)))return{annotations:[],lineWithoutComments:e};const r=[];let o=0;for(;o<e.length;){const n=e[o];if(n.style.color!==Ft){o++;continue}const c="function"==typeof t?t(n.content):$t(n.content,t);if(!c){o++;continue}const{name:a,query:i,rangeString:u}=c,l=e[o-1],h=e[o+1],d=[];l&&l.style.color===Tt&&d.push(l),d.push(n),h&&h.style.color===Tt&&d.push(h),r.push({tokens:d,name:a,query:i,ranges:Nt(u,s)}),o+=2}let n=e;for(const e of r)n=n.filter((t=>!e.tokens.includes(t)));n.every((e=>""===e.content.trim()))&&(n=null);return{annotations:r.map((e=>({name:e.name,query:e.query,ranges:e.ranges}))),lineWithoutComments:n}}(e,r,c);if(n.push(...t),!o)return null;const a=o.map((e=>e.content)).join("");return["mdx","jsx","tsx"].includes(s)&&t.length>0&&"{}"===a.trim()?null:(c++,a)})).filter((e=>null!==e)).join("\n");return{newCode:a,annotations:n}}function $t(e,t){var s;const r=e.match(/\s*([\w-]+)?(\([^\)]*\)|\[[^\]]*\])?(.*)$/),o=r[1],n=r[2],c=null===(s=r[3])||void 0===s?void 0:s.trim();return t.includes(o)?{name:o,rangeString:n,query:c}:null}function Mt(e,t){let s=[],r=1;return e.forEach((e=>{s.push({fromColumn:r,toColumn:r+e.content.length-1,token:e}),r+=e.content.length})),t.forEach((e=>{s=function(e,t){const{range:s}=t,{fromColumn:r,toColumn:o}=s,n=[];let c=0;for(;c<e.length&&e[c].toColumn<r;)n.push(e[c]),c++;if(c===e.length)return e;const a={annotationName:t.name,annotationQuery:t.query,fromColumn:r,toColumn:o,tokens:[]},i=e[c];if(i.fromColumn<r){const[e,t]=Wt(i,r);if(n.push(e),n.push(a),t.toColumn>o){const[e,s]=Wt(t,o+1);a.tokens.push(e),n.push(s)}else a.tokens.push(t);c++}else n.push(a);for(;c<e.length&&e[c].toColumn<=o;)a.tokens.push(e[c]),c++;if(c===e.length)return n;const u=e[c];if(u.fromColumn<=o){const[e,t]=Wt(u,o+1);a.tokens.push(e),n.push(t),c++}for(;c<e.length;)n.push(e[c]),c++;return n}(s,e)})),s.map((e=>Ut(e)))}function Ut(e){return"tokens"in e?{annotationName:e.annotationName,annotationQuery:e.annotationQuery,fromColumn:e.fromColumn,toColumn:e.toColumn,tokens:e.tokens.map((e=>Ut(e)))}:e.token}function Wt(e,t){if("token"in e){const s={...e.token,content:e.token.content.slice(0,t-e.fromColumn)},r={...e.token,content:e.token.content.slice(t-e.fromColumn)};return[{...e,toColumn:t-1,token:s},{...e,fromColumn:t,token:r}]}{const s=[],r=[];e.tokens.forEach((e=>{if(e.toColumn<t)s.push(e);else if(e.fromColumn>=t)r.push(e);else{const[o,n]=Wt(e,t);s.push(o),r.push(n)}}));return[{...e,toColumn:t-1,tokens:s},{...e,fromColumn:t,tokens:r}]}}function Dt(e,t){let s=e.map(((e,t)=>({fromLineNumber:t+1,toLineNumber:t+1,line:e})));return t.forEach((e=>{s=function(e,t){const{range:s,name:r,query:o}=t,{fromLineNumber:n,toLineNumber:c}=s,a=[];let i=0;for(;i<e.length&&e[i].toLineNumber<n;)a.push(e[i]),i++;if(i===e.length)return a;const u={annotationName:r,annotationQuery:o,fromLineNumber:n,toLineNumber:c,lines:[]},l=e[i];if(l.fromLineNumber<n){const[e,t]=Ht(l,n);if(a.push(e),a.push(u),t.toLineNumber>c){const[e,s]=Ht(t,c+1);u.lines.push(e),a.push(s)}else u.lines.push(t);i++}else a.push(u);for(;i<e.length&&e[i].toLineNumber<=c;)u.lines.push(e[i]),i++;if(i===e.length)return a;const h=e[i];if(h.fromLineNumber<=c){const[e,t]=Ht(h,c+1);u.lines.push(e),a.push(t),i++}for(;i<e.length;)a.push(e[i]),i++;return a}(s,e)})),s.map((e=>zt(e)))}function zt(e){return"line"in e?{lineNumber:e.fromLineNumber,tokens:e.line.tokens}:{annotationName:e.annotationName,annotationQuery:e.annotationQuery,fromLineNumber:e.fromLineNumber,toLineNumber:e.toLineNumber,lines:e.lines.map((e=>zt(e)))}}function Ht(e,t){if("line"in e)return[{...e,toLineNumber:t-1},{...e,fromLineNumber:t}];{const s=[],r=[];return e.lines.forEach((e=>{if(e.toLineNumber<t)s.push(e);else if(e.fromLineNumber>=t)r.push(e);else{const[o,n]=Ht(e,t);s.push(o),r.push(n)}})),[{...e,toLineNumber:t-1,lines:s},{...e,fromLineNumber:t,lines:r}]}}function Qt(e,t){const{inlineAnnotations:s,multilineAnnotations:r}=function(e){const t=[],s=[];return e.forEach((e=>{e.ranges.forEach((r=>{"lineNumber"in r?t.push({...e,range:r}):s.push({...e,range:r})}))})),{inlineAnnotations:t,multilineAnnotations:s}}(t);return Dt(e.map(((e,t)=>{const r=s.filter((e=>e.range.lineNumber===t+1));return{lineNumber:t+1,tokens:Mt(e,r)}})),r)}var Kt=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Vt={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function Yt(e,t){const s=e.indexOf("[",t);if(-1!==s){const t=e.indexOf("m",s);return{sequence:e.substring(s+2,t).split(";"),startPosition:s,position:t+1}}return{position:e.length}}function Xt(e,t){let s=1;const r=e[t+s++];let o;if("2"===r){const r=[e[t+s++],e[t+s++],e[t+s]].map((e=>Number.parseInt(e)));3!==r.length||r.some((e=>Number.isNaN(e)))||(o={type:"rgb",rgb:r})}else if("5"===r){const r=Number.parseInt(e[t+s]);Number.isNaN(r)||(o={type:"table",index:Number(r)})}return[s,o]}function Jt(e){const t=[];for(let s=0;s<e.length;s++){const r=e[s],o=Number.parseInt(r);if(!Number.isNaN(o))if(0===o)t.push({type:"resetAll"});else if(o<=9){Vt[o]&&t.push({type:"setDecoration",value:Vt[o]})}else if(o<=29){const e=Vt[o-20];e&&t.push({type:"resetDecoration",value:e})}else if(o<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Kt[o-30]}});else if(38===o){const[r,o]=Xt(e,s);o&&t.push({type:"setForegroundColor",value:o}),s+=r}else if(39===o)t.push({type:"resetForegroundColor"});else if(o<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Kt[o-40]}});else if(48===o){const[r,o]=Xt(e,s);o&&t.push({type:"setBackgroundColor",value:o}),s+=r}else 49===o?t.push({type:"resetBackgroundColor"}):o>=90&&o<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Kt[o-90+8]}}):o>=100&&o<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Kt[o-100+8]}})}return t}function Zt(e,t){const s=function(){let e=null,t=null,s=new Set;return{parse(r){const o=[];let n=0;do{const c=Yt(r,n),a=c.sequence?r.substring(n,c.startPosition):r.substring(n);if(a.length>0&&o.push({value:a,foreground:e,background:t,decorations:new Set(s)}),c.sequence){const r=Jt(c.sequence);for(const o of r)"resetAll"===o.type?(e=null,t=null,s.clear()):"resetForegroundColor"===o.type?e=null:"resetBackgroundColor"===o.type?t=null:"resetDecoration"===o.type&&s.delete(o.value);for(const o of r)"setForegroundColor"===o.type?e=o.value:"setBackgroundColor"===o.type?t=o.value:"setDecoration"===o.type&&s.add(o.value)}n=c.position}while(n<r.length);return o}}}(),r=e.split(/\r?\n|\r/g).map((e=>function(e,t,s){const r=e.parse(t),o=r.map((({value:e,foreground:t,background:r,decorations:o})=>{const n=es(t,s),c={};n&&(c.color=n);const a=es(r,s);return a&&(c.background=a),o.has("bold")&&(c.fontWeight="bold"),o.has("italic")&&(c.fontStyle="italic"),o.has("underline")&&(c.textDecoration="underline"),o.has("strikethrough")&&(c.textDecoration="line-through"),o.has("reverse")&&(c.color=a,c.background=n),o.has("dim")&&(c.opacity=.5),{content:e,style:c}}));return o}(s,e,t)));return r}function es(e,t){if(e){if("named"===e.type){return i(t,"terminal.ansi"+(e.name[0].toUpperCase()+e.name.slice(1)))}if("rgb"===e.type){const[t,s,r]=e.rgb;return`rgb(${t}, ${s}, ${r})`}}}async function ts(e,t){await Promise.all([St(e),p(t)])}async function ss(e,t,s="dark-plus",r={}){const o=e||"",n=t||"text";if("string"!=typeof o)throw new Error("Syntax highlighter error: code must be a string");if("string"!=typeof n)throw new Error("Syntax highlighter error: lang must be a string");return await ts([n],s),rs(o,n,s,r)}function rs(e,t,s="dark-plus",r={}){const o=e||"",n=t||"text";if("string"!=typeof o)throw new Error("Syntax highlighter error: code must be a string");if("string"!=typeof n)throw new Error("Syntax highlighter error: lang must be a string");const{langId:c,grammar:a}=wt(n),u=m(s),l="text"==c?At(o):"terminal"==c?Zt(o,u):(null==r?void 0:r.scopes)?Ct(o,a,u):Lt(o,a,u),h="terminal"==c?function(e){return{color:i(e,"terminal.foreground"),background:i(e,"terminal.background")}}(u):{color:u.foreground,background:u.background};if(function(e){return"annotations"in e}(r)){return{lines:Qt(l,(null==r?void 0:r.annotations)||[]),lang:c,style:h}}return{lines:l,lang:c,style:h}}async function os(e,t,s){if(!s)return{code:e,annotations:[]};await St([t]);const{grammar:r}=wt(t),{newCode:o,annotations:n}=Ot(e,r,t,s);return{code:o,annotations:n}}async function ns(e){if(!e)throw new Error("Syntax highlighter error: undefined theme");await ts([],e);return y(m(e))}function cs(e){if(!e)throw new Error("Syntax highlighter error: undefined theme");return y(m(e))}export{_ as LANG_NAMES,f as THEME_NAMES,vt as UnknownLanguageError,b as UnknownThemeError,os as extractAnnotations,ns as getThemeColors,cs as getThemeColorsSync,ss as highlight,rs as highlightSync,ts as preload};
